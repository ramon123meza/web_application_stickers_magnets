import{j as e,m as t,A as r}from"./motion-CLENUuyC.js";import{r as n}from"./vendor-CS8e_hUL.js";import{c as a,L as i,f as s,I as o,g as l,e as c,F as d,C as u,h,P as f,Q as g,i as m,j as p,k as x,b as w,T as b,l as y,v,p as A,u as j,H as N,m as C,n as k}from"./index-BNJ4QE4q.js";import{f as F}from"./fabric-_tpTtWWJ.js";import{U}from"./upload-_bqB9EhA.js";import{R as S}from"./refresh-cw-BkY6Gopg.js";import{C as E}from"./check-BIHko-mN.js";import{C as M,T as I}from"./trending-down-Ryiks9E3.js";import{a as R,o as T,u as _}from"./logger-DvYfAkBr.js";
/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=a("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),D=a("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),L=a("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),P=a("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),z=a("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),H=a("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),O=a("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),Q=a("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),q=a("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),$=a("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),G=a("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),W=a("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),V=a("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Y=a("Sticker",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M14 3v4a2 2 0 0 0 2 2h4",key:"36rjfy"}],["path",{d:"M8 13h0",key:"jdup5h"}],["path",{d:"M16 13h0",key:"l4i2ga"}],["path",{d:"M10 16s.8 1 2 1c1.3 0 2-1 2-1",key:"1vvgv3"}]]),X=n.forwardRef(({productSize:r={width:5,height:5},imageDataUrl:a,scale:i=1,rotation:s=0,showGrid:o=!1,shape:l="square",onCanvasReady:c,onImageLoaded:d,className:u=""},h)=>{const f=n.useRef(null),g=n.useRef(null),m=n.useRef(null),p=n.useRef(null),[x,w]=n.useState(!1),[b,y]=n.useState({width:400,height:400});n.useRef(null),n.useRef(null);const v=n.useCallback(()=>{if(!g.current)return{width:400,height:400};const e=g.current,t=e.clientWidth-48,n=e.clientHeight-48,a=r.width/r.height;let i,s;return a>=1?(i=Math.min(t,n*a),s=i/a):(s=Math.min(n,t/a),i=s*a),i=Math.max(300,Math.min(i,600)),s=Math.max(300,Math.min(s,600)),{width:Math.round(i),height:Math.round(s)}},[r]);n.useEffect(()=>{if(!f.current)return;const e=v();y(e);const t=new F.fabric.Canvas(f.current,{width:e.width,height:e.height,backgroundColor:"transparent",selection:!1,preserveObjectStacking:!0,renderOnAddRemove:!0});m.current=t,w(!0),c&&c(t);const r=()=>{const e=v();y(e),t.setDimensions(e),t&&t.getContext()&&t.renderAll()};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),t.dispose(),m.current=null}},[v,c]),n.useEffect(()=>{if(!m.current)return;const e=v();y(e),m.current.setDimensions(e),p.current&&A(p.current),m.current&&m.current.getContext()&&m.current.renderAll()},[r,v]);const A=n.useCallback(e=>{const t=m.current;if(!t||!e)return;const r=t.getWidth(),n=t.getHeight();e.set({left:r/2,top:n/2,originX:"center",originY:"center"}),e.setCoords()},[]),j=n.useCallback(e=>{const t=m.current;if(!t||!e)return;const r=t.getWidth(),n=t.getHeight(),a=.9*r/e.width,i=.9*n/e.height,s=Math.min(a,i);e.set({scaleX:s,scaleY:s,left:r/2,top:n/2,originX:"center",originY:"center"}),e.setCoords()},[]);n.useEffect(()=>{if(!m.current||!a)return;const e=m.current;p.current&&(e.remove(p.current),p.current=null),F.fabric.Image.fromURL(a,t=>{t.set({selectable:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!1,lockRotation:!0,originX:"center",originY:"center",cornerSize:12,cornerColor:"#3A6EA5",cornerStrokeColor:"#fff",borderColor:"#3A6EA5",borderScaleFactor:2,transparentCorners:!1}),j(t),e.add(t),e.setActiveObject(t),p.current=t,t.on("moving",()=>{N(t)}),t.on("scaling",()=>{t.scaleX<.1&&t.set({scaleX:.1,scaleY:.1}),t.scaleX>5&&t.set({scaleX:5,scaleY:5}),t.setCoords()}),t.on("scaled",()=>{N(t),e&&e.getContext()&&e.renderAll()}),e&&e.getContext()&&e.renderAll(),d&&d(t)},{crossOrigin:"anonymous"})},[a,j,d]);const N=n.useCallback(e=>{const t=m.current;if(!t||!e)return;const r=t.getWidth(),n=t.getHeight(),a=e.getScaledWidth(),i=e.getScaledHeight(),s=.3*a,o=.3*i,l=s-a/2,c=r-s+a/2,d=o-i/2,u=n-o+i/2;let h=e.left,f=e.top;e.left<l&&(h=l),e.left>c&&(h=c),e.top<d&&(f=d),e.top>u&&(f=u),h===e.left&&f===e.top||(e.set({left:h,top:f}),e.setCoords())},[]);n.useEffect(()=>{if(!p.current||!m.current)return;const e=p.current,t=m.current,r=t.getWidth(),n=t.getHeight(),a=.9*r/e.width,s=.9*n/e.height,o=Math.min(a,s)*i;e.left,e.top,e.set({scaleX:o,scaleY:o}),e.setCoords(),t&&t.getContext()&&t.renderAll()},[i]),n.useEffect(()=>{if(!p.current||!m.current)return;p.current.set({angle:s}),m.current&&m.current.getContext()&&m.current.renderAll()},[s]),n.useImperativeHandle(h,()=>({getCanvas:()=>m.current,getImage:()=>p.current,reset:()=>{p.current&&(A(p.current),p.current.set({angle:0}),m.current&&m.current.getContext()&&m.current.renderAll())},fitToCanvas:()=>{p.current&&(j(p.current),m.current&&m.current.getContext()&&m.current.renderAll())},exportAsDataURL:(e=2)=>{var t;return null==(t=m.current)?void 0:t.toDataURL({format:"png",quality:1,multiplier:e})}}),[A]);const C=n.useCallback(()=>{const e=m.current;if(!e)return;e.getObjects().filter(e=>"safeArea"===e.name||"printArea"===e.name||"safeAreaText"===e.name).forEach(t=>e.remove(t));const t=e.getWidth(),r=e.getHeight();let n;if("round"===l){const e=Math.min(t,r)/2;n=new F.fabric.Circle({left:t/2,top:r/2,radius:e-2,fill:"transparent",stroke:"#e5e7eb",strokeWidth:2,selectable:!1,evented:!1,name:"printArea",originX:"center",originY:"center"})}else n=new F.fabric.Rect({left:2,top:2,width:t-4,height:r-4,fill:"transparent",stroke:"#e5e7eb",strokeWidth:2,selectable:!1,evented:!1,name:"printArea"});const a=.05;let i;if("round"===l){const e=.95*(Math.min(t,r)/2);i=new F.fabric.Circle({left:t/2,top:r/2,radius:e,fill:"transparent",stroke:"#3A6EA5",strokeWidth:2,strokeDashArray:[8,4],selectable:!1,evented:!1,name:"safeArea",originX:"center",originY:"center"})}else i=new F.fabric.Rect({left:t*a,top:r*a,width:.9*t,height:.9*r,fill:"transparent",stroke:"#3A6EA5",strokeWidth:2,strokeDashArray:[8,4],selectable:!1,evented:!1,name:"safeArea"});const s=new F.fabric.Text("Safe to Print",{left:t/2,top:"round"===l?.85*r:.92*r,fontSize:12,fill:"#3A6EA5",textAlign:"center",selectable:!1,evented:!1,name:"safeAreaText",originX:"center",originY:"center",backgroundColor:"rgba(255,255,255,0.8)",padding:4});e.add(n),e.add(i),e.add(s),e.sendToBack(s),e.sendToBack(i),e.sendToBack(n),e&&e.getContext()&&e.renderAll()},[l]);return n.useEffect(()=>{x&&C()},[x,b,l,C]),n.useEffect(()=>{const e=m.current;if(!e)return;if(e.getObjects().filter(e=>"gridLine"===e.name).forEach(t=>e.remove(t)),o){const t=40,r=e.getWidth(),n=e.getHeight();for(let a=t;a<r;a+=t){const t=new F.fabric.Line([a,0,a,n],{stroke:"rgba(0,0,0,0.1)",strokeWidth:1,selectable:!1,evented:!1,name:"gridLine"});e.add(t),e.sendToBack(t)}for(let a=t;a<n;a+=t){const t=new F.fabric.Line([0,a,r,a],{stroke:"rgba(0,0,0,0.1)",strokeWidth:1,selectable:!1,evented:!1,name:"gridLine"});e.add(t),e.sendToBack(t)}}e&&e.getContext()&&e.renderAll()},[o,b]),e.jsxs(t.div,{ref:g,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative flex items-center justify-center min-h-[400px] p-6 ${u}`,children:[e.jsx("div",{className:"absolute inset-0 rounded-xl",style:{backgroundImage:"\n            linear-gradient(45deg, #e5e7eb 25%, transparent 25%),\n            linear-gradient(-45deg, #e5e7eb 25%, transparent 25%),\n            linear-gradient(45deg, transparent 75%, #e5e7eb 75%),\n            linear-gradient(-45deg, transparent 75%, #e5e7eb 75%)\n          ",backgroundSize:"20px 20px",backgroundPosition:"0 0, 0 10px, 10px -10px, -10px 0px"}}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg overflow-hidden",style:{width:b.width,height:b.height},children:[e.jsx("canvas",{ref:f,id:"editor-canvas"}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:[r.width,'" x ',r.height,'"']})]}),!x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 rounded-xl",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-cool-blue border-t-transparent"})})]})});
/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function K({onFileSelect:a,isLoading:l=!1,progress:c=0,error:d=null,hasImage:u=!1,imagePreview:h=null,accept:f=".jpg,.jpeg,.png",maxSize:g=10485760,className:m=""}){const[p,x]=n.useState(!1),[w,b]=n.useState(0),y=n.useRef(null),v=n.useCallback(e=>{e.preventDefault(),e.stopPropagation(),b(e=>e+1),x(!0)},[]),A=n.useCallback(e=>{e.preventDefault(),e.stopPropagation(),b(e=>{const t=e-1;return 0===t&&x(!1),t})},[]),j=n.useCallback(e=>{e.preventDefault(),e.stopPropagation()},[]),N=n.useCallback(e=>{var t;e.preventDefault(),e.stopPropagation(),x(!1),b(0);const r=null==(t=e.dataTransfer)?void 0:t.files;if(r&&r.length>0){const e=r[0];if(!["image/jpeg","image/jpg","image/png"].includes(e.type))return;null==a||a(e)}},[a]),C=n.useCallback(()=>{var e;null==(e=y.current)||e.click()},[]),k=n.useCallback(e=>{var t;const r=null==(t=e.target)?void 0:t.files;r&&r.length>0&&(null==a||a(r[0])),y.current&&(y.current.value="")},[a]);return e.jsxs("div",{className:m,children:[e.jsx("input",{ref:y,type:"file",accept:f,onChange:k,className:"hidden","aria-label":"Upload image"}),e.jsxs(t.div,{onClick:l?void 0:C,onDragEnter:v,onDragLeave:A,onDragOver:j,onDrop:N,whileHover:l?void 0:{scale:1.01},whileTap:l?void 0:{scale:.99},className:`\n          relative overflow-hidden rounded-xl border-2 border-dashed\n          transition-all duration-300 cursor-pointer\n          ${p?"border-cool-blue bg-soft-sky/50 scale-[1.02]":d?"border-red-400 bg-red-50":u?"border-green-400 bg-green-50":"border-gray-300 bg-gray-50 hover:border-cool-blue hover:bg-soft-sky/30"}\n        `,children:[e.jsx("div",{className:"p-8 min-h-[200px] flex flex-col items-center justify-center",children:e.jsx(r,{mode:"wait",children:l?e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-col items-center",children:[e.jsx(i,{className:"w-12 h-12 text-cool-blue animate-spin mb-4"}),e.jsx("p",{className:"text-graphite font-medium mb-2",children:"Processing image..."}),e.jsx("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(t.div,{initial:{width:0},animate:{width:`${c}%`},className:"h-full bg-cool-blue rounded-full",transition:{duration:.3}})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[c,"%"]})]},"loading"):d?e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-col items-center text-center",children:[e.jsx(P,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Upload Failed"}),e.jsx("p",{className:"text-sm text-red-500",children:d}),e.jsx("button",{onClick:e=>{e.stopPropagation(),C()},className:"mt-4 text-cool-blue hover:underline text-sm font-medium",children:"Try again"})]},"error"):u&&h?e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:h,alt:"Uploaded preview",className:"w-24 h-24 object-cover rounded-lg shadow-md"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-green-500 rounded-full p-1",children:e.jsx(s,{className:"w-5 h-5 text-white"})})]}),e.jsx("p",{className:"text-green-600 font-medium mb-1",children:"Image uploaded!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click or drag to replace"})]},"success"):e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-col items-center text-center",children:[e.jsx(t.div,{animate:p?{scale:1.1,rotate:5}:{scale:1,rotate:0},className:"mb-4",children:p?e.jsx(o,{className:"w-16 h-16 text-cool-blue"}):e.jsx(U,{className:"w-16 h-16 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-graphite mb-1",children:p?"Drop your image here":"Upload Your Design"}),e.jsxs("p",{className:"text-gray-500 text-sm mb-4",children:["Drag and drop your image or"," ",e.jsx("span",{className:"text-cool-blue font-medium",children:"click to browse"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:"JPG"}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded",children:"PNG"}),e.jsx("span",{children:"Max 10MB"})]})]},"empty")})}),e.jsx(r,{children:p&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-cool-blue/10 pointer-events-none",children:e.jsx(t.div,{className:"absolute inset-4 border-2 border-cool-blue rounded-lg",animate:{borderStyle:["dashed","solid","dashed"]},transition:{duration:1,repeat:1/0}})})})]})]})}function Z({shape:r="square",onShapeChange:n,rotation:a=0,onRotationChange:i,showGrid:s=!1,onGridToggle:o,onReset:l,onDownload:c,onFitToCanvas:d,disabled:u=!1,className:h=""}){const f=({onClick:r,title:n,icon:a,active:i=!1,variant:s="default"})=>e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,disabled:u,title:n,className:`\n        p-2.5 rounded-lg transition-all duration-200\n        disabled:opacity-50 disabled:cursor-not-allowed\n        ${"primary"===s?"bg-cool-blue text-white hover:bg-deep-indigo shadow-md":i?"bg-soft-sky text-cool-blue border-2 border-cool-blue":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}\n      `,children:e.jsx(a,{className:"w-5 h-5"})});return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:`\n        flex flex-wrap items-center justify-center gap-4 p-4\n        bg-white rounded-xl shadow-soft border border-gray-100\n        ${h}\n      `,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mr-1",children:"Shape"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{onClick:()=>null==n?void 0:n("square"),title:"Square/Rectangle die cut",icon:V,active:"square"===r}),e.jsx(f,{onClick:()=>null==n?void 0:n("round"),title:"Round die cut",icon:B,active:"round"===r}),e.jsx(f,{onClick:()=>null==n?void 0:n("custom"),title:"Custom die cut (follows image shape)",icon:W,active:"custom"===r})]}),"custom"===r&&e.jsx("div",{className:"ml-2 text-xs text-gray-600 max-w-[200px]",children:"Upload images with transparent backgrounds for custom shapes"})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mr-1",children:"Rotate"}),e.jsx(f,{onClick:()=>{null==i||i((a-90+360)%360)},title:"Rotate counter-clockwise (90°)",icon:q}),e.jsx(f,{onClick:()=>{null==i||i((a+90)%360)},title:"Rotate clockwise (90°)",icon:$}),e.jsxs("span",{className:"text-sm font-medium text-graphite min-w-[35px] text-center",children:[a,"°"]})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{onClick:o,title:"Toggle grid",icon:z,active:s}),e.jsx(f,{onClick:d,title:"Fit to canvas",icon:O}),e.jsx(f,{onClick:l,title:"Reset position",icon:S})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsx(f,{onClick:c,title:"Download preview",icon:D,variant:"primary"})]})}function J({activeType:r=l.STICKERS,onChange:n,className:a=""}){var i;const s=[{id:l.STICKERS,label:"Stickers",icon:Y,description:"Die-cut vinyl stickers"},{id:l.DIE_CUT_MAGNETS,label:"Die-Cut Magnets",icon:c,description:"Custom shape magnets"},{id:l.FRIDGE_MAGNETS,label:"Fridge Magnets",icon:V,description:"Standard fridge magnets"}];return e.jsxs("div",{className:`relative ${a}`,children:[e.jsx("div",{className:"flex bg-gray-100 rounded-xl p-1",children:s.map(a=>{const i=a.icon,s=r===a.id;return e.jsxs(t.button,{onClick:()=>null==n?void 0:n(a.id),whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                relative flex-1 flex items-center justify-center gap-2\n                px-3 py-3 rounded-lg font-medium text-sm\n                transition-colors duration-200\n                ${s?"text-white":"text-gray-600 hover:text-graphite"}\n              `,children:[s&&e.jsx(t.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gradient-to-r from-cool-blue to-deep-indigo rounded-lg shadow-md",transition:{type:"spring",stiffness:400,damping:30}}),e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a.label})]})]},a.id)})}),e.jsx(t.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"text-xs text-gray-500 mt-2 text-center",children:null==(i=s.find(e=>e.id===r))?void 0:i.description},r)]})}function ee({productType:a=l.STICKERS,selectedSize:i,onSizeChange:s,selectedQuantity:o=12,onQuantityChange:c,disabled:m=!1,className:p=""}){const[x,w]=n.useState(!1),b=h(a),y=a===l.FRIDGE_MAGNETS,v=g,A=e=>{if(e.includes("x")){const t=e.split("x");return`${t[0]}" x ${t[1]}"`}return e},j=e=>{const t=e.split("x"),r=Math.max(parseFloat(t[0]),parseFloat(t[1]))/22*100;return Math.max(20,Math.min(r,100))};return e.jsxs("div",{className:`space-y-6 ${p}`,children:[y&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-graphite",children:[e.jsx(G,{className:"w-4 h-4 text-cool-blue"}),"Fridge Magnet Size"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(r=>e.jsxs(t.button,{onClick:()=>null==s?void 0:s(r),disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:`\n                  relative p-3 rounded-lg border-2 text-sm font-medium\n                  transition-all duration-200\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  ${i===r?"border-cool-blue bg-soft-sky text-cool-blue":"border-gray-200 bg-white text-gray-600 hover:border-gray-300"}\n                `,children:[i===r&&e.jsx(t.span,{layoutId:"selectedFridgeSize",className:"absolute top-1 right-1",children:e.jsx(E,{className:"w-4 h-4 text-cool-blue"})}),A(r)]},r))})]}),!y&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-graphite",children:[e.jsx(G,{className:"w-4 h-4 text-cool-blue"}),"Select Size"]}),e.jsxs("div",{className:"relative",children:[e.jsxs(t.button,{onClick:()=>!m&&w(!x),disabled:m,whileHover:{scale:1.01},className:`\n                w-full flex items-center justify-between p-4\n                bg-white border-2 rounded-xl\n                transition-all duration-200\n                disabled:opacity-50 disabled:cursor-not-allowed\n                ${x?"border-cool-blue shadow-md":"border-gray-200 hover:border-gray-300"}\n              `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"relative w-10 h-10 bg-gray-100 rounded-lg overflow-hidden",children:e.jsx(t.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute bg-cool-blue rounded",style:{width:`${j(i)}%`,height:`${j(i)}%`,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},i)}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-graphite",children:A(i)}),e.jsx("div",{className:"text-xs text-gray-500",children:a===l.STICKERS?"Vinyl Sticker":"Die-Cut Magnet"})]})]}),e.jsx(t.div,{animate:{rotate:x?180:0},transition:{duration:.2},children:e.jsx(u,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx(r,{children:x&&e.jsx(t.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"\n                    absolute z-50 w-full mt-2 py-2\n                    bg-white border border-gray-200 rounded-xl\n                    shadow-large max-h-64 overflow-y-auto\n                  ",children:b.map(r=>e.jsxs(t.button,{onClick:()=>{null==s||s(r),w(!1)},whileHover:{backgroundColor:"rgba(215, 232, 255, 0.5)"},className:`\n                        w-full flex items-center gap-3 px-4 py-3\n                        transition-colors duration-150\n                        ${i===r?"bg-soft-sky text-cool-blue":"text-graphite"}\n                      `,children:[e.jsx("div",{className:"relative w-8 h-8 bg-gray-100 rounded overflow-hidden flex-shrink-0",children:e.jsx("div",{className:`\n                            absolute rounded\n                            ${i===r?"bg-cool-blue":"bg-gray-400"}\n                          `,style:{width:`${j(r)}%`,height:`${j(r)}%`,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),e.jsx("span",{className:"font-medium",children:A(r)}),i===r&&e.jsx(E,{className:"w-5 h-5 text-cool-blue ml-auto"})]},r))})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-graphite",children:[e.jsx(f,{className:"w-4 h-4 text-cool-blue"}),"Quantity"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[12,25,50,100,1e3].map(r=>e.jsxs(t.button,{onClick:()=>null==c?void 0:c(r),disabled:m,whileHover:{scale:1.05},whileTap:{scale:.95},className:`\n                relative px-4 py-2 rounded-lg font-medium text-sm\n                transition-all duration-200\n                disabled:opacity-50 disabled:cursor-not-allowed\n                ${o===r?"bg-cool-blue text-white shadow-md":"bg-white border border-gray-200 text-gray-600 hover:border-cool-blue"}\n              `,children:[r.toLocaleString(),o===r&&e.jsx(t.span,{layoutId:"selectedQty",className:"absolute inset-0 bg-cool-blue rounded-lg -z-10"})]},r))}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:o,onChange:e=>null==c?void 0:c(parseInt(e.target.value)),disabled:m,className:"\n              w-full p-3 pr-10 bg-white border-2 border-gray-200 rounded-lg\n              text-graphite font-medium appearance-none cursor-pointer\n              transition-all duration-200\n              hover:border-gray-300 focus:border-cool-blue focus:outline-none\n              disabled:opacity-50 disabled:cursor-not-allowed\n            ",children:v.map(t=>e.jsxs("option",{value:t,children:[t.toLocaleString()," pieces"]},t))}),e.jsx(u,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select quantity for better per-piece pricing"})]}),x&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)})]})}function te({productType:a,size:i,quantity:s,className:o=""}){const[l,c]=n.useState(0),[d,u]=n.useState(!1),h=n.useRef(0),f=m(a,i,s)||0,g=p(a,i,s)||0,y=x(a,i,s),v=f>=50;n.useEffect(()=>{if(f===h.current)return;u(!0);const e=h.current,t=f,r=Date.now(),n=()=>{const a=Date.now()-r,i=Math.min(a/500,1),s=1-Math.pow(1-i,3);c(e+(t-e)*s),i<1?requestAnimationFrame(n):(u(!1),h.current=t)};requestAnimationFrame(n)},[f]);const A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-gradient-to-br from-white to-soft-sky/30 rounded-2xl p-6 border border-gray-100 shadow-soft ${o}`,children:[e.jsx("div",{className:"text-center mb-4",children:e.jsxs(t.div,{className:"relative inline-block",animate:d?{scale:[1,1.02,1]}:{},transition:{duration:.3},children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Total Price"}),e.jsxs("div",{className:"flex items-baseline justify-center",children:[e.jsx("span",{className:"text-lg text-gray-400 mr-1",children:"$"}),e.jsx(t.span,{className:"text-4xl md:text-5xl font-bold text-deep-indigo",children:l.toFixed(2).split(".")[0]},f),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-deep-indigo",children:[".",l.toFixed(2).split(".")[1]]})]})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(M,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[e.jsx("span",{className:"font-semibold text-graphite",children:A(g)})," ","per piece"]})]}),e.jsx(r,{mode:"wait",children:y>0&&e.jsx(t.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"flex justify-center mb-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 rounded-full",children:[e.jsx(I,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-green-700 font-semibold text-sm",children:["Save ",y,"% vs 12 qty"]}),e.jsx(w,{className:"w-4 h-4 text-green-500"})]})},y)}),e.jsx(r,{children:v&&e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex justify-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-cool-blue/10 rounded-full",children:[e.jsx(b,{className:"w-4 h-4 text-cool-blue"}),e.jsx("span",{className:"text-cool-blue font-medium text-sm",children:"Free Shipping"})]})})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[s.toLocaleString()," pieces @ ",A(g),"/ea"]}),e.jsx("span",{className:"font-semibold",children:A(f)})]})}),e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-xs text-center text-gray-400 mt-4",children:"Price includes printing, cutting, and packaging"})]})}function re({value:a="",onChange:i,maxLength:s=500,placeholder:o="Add any special instructions for your order...",className:l=""}){const[c,d]=n.useState(!1),[h,f]=n.useState(!1),g=a.length,m=s-g,p=m<50;return e.jsxs("div",{className:l,children:[e.jsxs(t.button,{onClick:()=>d(!c),className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-cool-blue"}),e.jsx("span",{className:"font-medium text-graphite text-sm",children:"Special Instructions"}),a&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",g," chars)"]})]}),e.jsx(t.div,{animate:{rotate:c?180:0},transition:{duration:.2},children:e.jsx(u,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx(r,{children:c&&e.jsx(t.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-3 space-y-2",children:[e.jsxs("div",{className:`\n                  relative rounded-xl border-2 transition-all duration-200\n                  ${h?"border-cool-blue shadow-md":"border-gray-200 hover:border-gray-300"}\n                `,children:[e.jsx("textarea",{value:a,onChange:e=>{const t=e.target.value;t.length<=s&&(null==i||i(t))},onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:o,rows:4,className:"\n                    w-full p-4 bg-transparent resize-none\n                    text-graphite placeholder-gray-400\n                    focus:outline-none\n                  "}),e.jsxs("div",{className:`\n                  absolute bottom-2 right-3 text-xs font-medium\n                  ${p?"text-orange-500":"text-gray-400"}\n                `,children:[m," characters remaining"]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-soft-sky/30 rounded-lg",children:[e.jsx(y,{className:"w-4 h-4 text-cool-blue flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("p",{className:"font-medium text-graphite",children:"Example instructions:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[e.jsx("li",{children:"Special color requests"}),e.jsx("li",{children:"Mirror or flip the image"}),e.jsx("li",{children:"Add border or padding"}),e.jsx("li",{children:"Rush order notes"})]})]})]})]})})})]})}function ne(e,t){return new Promise(function(r,n){let a;return ae(e).then(function(e){try{return a=e,r(new Blob([t.slice(0,2),a,t.slice(2)],{type:"image/jpeg"}))}catch(i){return n(i)}},n)})}X.displayName="ImageCanvas";const ae=e=>new Promise((t,r)=>{const n=new FileReader;n.addEventListener("load",({target:{result:e}})=>{const n=new DataView(e);let a=0;if(65496!==n.getUint16(a))return r("not a valid JPEG");for(a+=2;;){const i=n.getUint16(a);if(65498===i)break;const s=n.getUint16(a+2);if(65505===i&&1165519206===n.getUint32(a+4)){const i=a+10;let o;switch(n.getUint16(i)){case 18761:o=!0;break;case 19789:o=!1;break;default:return r("TIFF header contains invalid endian")}if(42!==n.getUint16(i+2,o))return r("TIFF header contains invalid version");const l=n.getUint32(i+4,o),c=i+l+2+12*n.getUint16(i+l,o);for(let e=i+l+2;e<c;e+=12)if(274==n.getUint16(e,o)){if(3!==n.getUint16(e+2,o))return r("Orientation data type is invalid");if(1!==n.getUint32(e+4,o))return r("Orientation data count is invalid");n.setUint16(e+8,1,o);break}return t(e.slice(a,a+2+s))}a+=2+s}return t(new Blob)}),n.readAsArrayBuffer(e)});var ie,se,oe,le={},ce={get exports(){return le},set exports(e){le=e}};oe={},ce.exports=oe,oe.parse=function(e,t){for(var r=oe.bin.readUshort,n=oe.bin.readUint,a=0,i={},s=new Uint8Array(e),o=s.length-4;101010256!=n(s,o);)o--;a=o,a+=4;var l=r(s,a+=4);r(s,a+=2);var c=n(s,a+=2),d=n(s,a+=4);a+=4,a=d;for(var u=0;u<l;u++){n(s,a),a+=4,a+=4,a+=4,n(s,a+=4),c=n(s,a+=4);var h=n(s,a+=4),f=r(s,a+=4),g=r(s,a+2),m=r(s,a+4);a+=6;var p=n(s,a+=8);a+=4,a+=f+g+m,oe._readLocal(s,p,i,c,h,t)}return i},oe._readLocal=function(e,t,r,n,a,i){var s=oe.bin.readUshort,o=oe.bin.readUint;o(e,t),s(e,t+=4),s(e,t+=2);var l=s(e,t+=2);o(e,t+=2),o(e,t+=4),t+=4;var c=s(e,t+=8),d=s(e,t+=2);t+=2;var u=oe.bin.readUTF8(e,t,c);if(t+=c,t+=d,i)r[u]={size:a,csize:n};else{var h=new Uint8Array(e.buffer,t);if(0==l)r[u]=new Uint8Array(h.buffer.slice(t,t+n));else{if(8!=l)throw"unknown compression method: "+l;var f=new Uint8Array(a);oe.inflateRaw(h,f),r[u]=f}}},oe.inflateRaw=function(e,t){return oe.F.inflate(e,t)},oe.inflate=function(e,t){return e[0],e[1],oe.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},oe.deflate=function(e,t){null==t&&(t={level:6});var r=0,n=new Uint8Array(50+Math.floor(1.1*e.length));n[r]=120,n[r+1]=156,r+=2,r=oe.F.deflateRaw(e,n,r,t.level);var a=oe.adler(e,0,e.length);return n[r+0]=a>>>24&255,n[r+1]=a>>>16&255,n[r+2]=a>>>8&255,n[r+3]=a>>>0&255,new Uint8Array(n.buffer,0,r+4)},oe.deflateRaw=function(e,t){null==t&&(t={level:6});var r=new Uint8Array(50+Math.floor(1.1*e.length)),n=oe.F.deflateRaw(e,r,n,t.level);return new Uint8Array(r.buffer,0,n)},oe.encode=function(e,t){null==t&&(t=!1);var r=0,n=oe.bin.writeUint,a=oe.bin.writeUshort,i={};for(var s in e){var o=!oe._noNeed(s)&&!t,l=e[s],c=oe.crc.crc(l,0,l.length);i[s]={cpr:o,usize:l.length,crc:c,file:o?oe.deflateRaw(l):l}}for(var s in i)r+=i[s].file.length+30+46+2*oe.bin.sizeUTF8(s);r+=22;var d=new Uint8Array(r),u=0,h=[];for(var s in i){var f=i[s];h.push(u),u=oe._writeHeader(d,u,s,f,0)}var g=0,m=u;for(var s in i)f=i[s],h.push(u),u=oe._writeHeader(d,u,s,f,1,h[g++]);var p=u-m;return n(d,u,101010256),u+=4,a(d,u+=4,g),a(d,u+=2,g),n(d,u+=2,p),n(d,u+=4,m),u+=4,u+=2,d.buffer},oe._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},oe._writeHeader=function(e,t,r,n,a,i){var s=oe.bin.writeUint,o=oe.bin.writeUshort,l=n.file;return s(e,t,0==a?67324752:33639248),t+=4,1==a&&(t+=2),o(e,t,20),o(e,t+=2,0),o(e,t+=2,n.cpr?8:0),s(e,t+=2,0),s(e,t+=4,n.crc),s(e,t+=4,l.length),s(e,t+=4,n.usize),o(e,t+=4,oe.bin.sizeUTF8(r)),o(e,t+=2,0),t+=2,1==a&&(t+=2,t+=2,s(e,t+=6,i),t+=4),t+=oe.bin.writeUTF8(e,t,r),0==a&&(e.set(l,t),t+=l.length),t},oe.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update:function(e,t,r,n){for(var a=0;a<n;a++)e=oe.crc.table[255&(e^t[r+a])]^e>>>8;return e},crc:function(e,t,r){return 4294967295^oe.crc.update(4294967295,e,t,r)}},oe.adler=function(e,t,r){for(var n=1,a=0,i=t,s=t+r;i<s;){for(var o=Math.min(i+5552,s);i<o;)a+=n+=e[i++];n%=65521,a%=65521}return a<<16|n},oe.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255},readASCII:function(e,t,r){for(var n="",a=0;a<r;a++)n+=String.fromCharCode(e[t+a]);return n},writeASCII:function(e,t,r){for(var n=0;n<r.length;n++)e[t+n]=r.charCodeAt(n)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var n,a="",i=0;i<r;i++)a+="%"+oe.bin.pad(e[t+i].toString(16));try{n=decodeURIComponent(a)}catch(s){return oe.bin.readASCII(e,t,r)}return n},writeUTF8:function(e,t,r){for(var n=r.length,a=0,i=0;i<n;i++){var s=r.charCodeAt(i);if(4294967168&s)if(4294965248&s)if(4294901760&s){if(4292870144&s)throw"e";e[t+a]=240|s>>18,e[t+a+1]=128|s>>12&63,e[t+a+2]=128|s>>6&63,e[t+a+3]=128|63&s,a+=4}else e[t+a]=224|s>>12,e[t+a+1]=128|s>>6&63,e[t+a+2]=128|63&s,a+=3;else e[t+a]=192|s>>6,e[t+a+1]=128|63&s,a+=2;else e[t+a]=s,a++}return a},sizeUTF8:function(e){for(var t=e.length,r=0,n=0;n<t;n++){var a=e.charCodeAt(n);if(4294967168&a)if(4294965248&a)if(4294901760&a){if(4292870144&a)throw"e";r+=4}else r+=3;else r+=2;else r++}return r}},oe.F={},oe.F.deflateRaw=function(e,t,r,n){var a=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],i=oe.F.U,s=oe.F._goodIndex;oe.F._hash;var o=oe.F._putsE,l=0,c=r<<3,d=0,u=e.length;if(0==n){for(;l<u;)o(t,c,l+(j=Math.min(65535,u-l))==u?1:0),c=oe.F._copyExact(e,l,j,t,c+8),l+=j;return c>>>3}var h=i.lits,f=i.strt,g=i.prev,m=0,p=0,x=0,w=0,b=0,y=0;for(u>2&&(f[y=oe.F._hash(e,0)]=0),l=0;l<u;l++){if(b=y,l+1<u-2){y=oe.F._hash(e,l+1);var v=l+1&32767;g[v]=f[y],f[y]=v}if(d<=l){(m>14e3||p>26697)&&u-l>100&&(d<l&&(h[m]=l-d,m+=2,d=l),c=oe.F._writeBlock(l==u-1||d==u?1:0,h,m,w,e,x,l-x,t,c),m=p=w=0,x=l);var A=0;l<u-2&&(A=oe.F._bestMatch(e,l,g,b,Math.min(a[2],u-l),a[3]));var j=A>>>16,N=65535&A;if(0!=A){N=65535&A;var C=s(j=A>>>16,i.of0);i.lhst[257+C]++;var k=s(N,i.df0);i.dhst[k]++,w+=i.exb[C]+i.dxb[k],h[m]=j<<23|l-d,h[m+1]=N<<16|C<<8|k,m+=2,d=l+j}else i.lhst[e[l]]++;p++}}for(x==l&&0!=e.length||(d<l&&(h[m]=l-d,m+=2,d=l),c=oe.F._writeBlock(1,h,m,w,e,x,l-x,t,c),m=0,p=0,m=p=w=0,x=l);7&c;)c++;return c>>>3},oe.F._bestMatch=function(e,t,r,n,a,i){var s=32767&t,o=r[s],l=s-o+32768&32767;if(o==s||n!=oe.F._hash(e,t-l))return 0;for(var c=0,d=0,u=Math.min(32767,t);l<=u&&0!=--i&&o!=s;){if(0==c||e[t+c]==e[t+c-l]){var h=oe.F._howLong(e,t,l);if(h>c){if(d=l,(c=h)>=a)break;l+2<h&&(h=l+2);for(var f=0,g=0;g<h-2;g++){var m=t-l+g+32768&32767,p=m-r[m]+32768&32767;p>f&&(f=p,o=m)}}}l+=(s=o)-(o=r[s])+32768&32767}return c<<16|d},oe.F._howLong=function(e,t,r){if(e[t]!=e[t-r]||e[t+1]!=e[t+1-r]||e[t+2]!=e[t+2-r])return 0;var n=t,a=Math.min(e.length,t+258);for(t+=3;t<a&&e[t]==e[t-r];)t++;return t-n},oe.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},oe.saved=0,oe.F._writeBlock=function(e,t,r,n,a,i,s,o,l){var c,d,u,h,f,g,m,p,x,w=oe.F.U,b=oe.F._putsF,y=oe.F._putsE;w.lhst[256]++,d=(c=oe.F.getTrees())[0],u=c[1],h=c[2],f=c[3],g=c[4],m=c[5],p=c[6],x=c[7];var v=32+(l+3&7?8-(l+3&7):0)+(s<<3),A=n+oe.F.contSize(w.fltree,w.lhst)+oe.F.contSize(w.fdtree,w.dhst),j=n+oe.F.contSize(w.ltree,w.lhst)+oe.F.contSize(w.dtree,w.dhst);j+=14+3*m+oe.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var N=0;N<286;N++)w.lhst[N]=0;for(N=0;N<30;N++)w.dhst[N]=0;for(N=0;N<19;N++)w.ihst[N]=0;var C=v<A&&v<j?0:A<j?1:2;if(b(o,l,e),b(o,l+1,C),l+=3,0==C){for(;7&l;)l++;l=oe.F._copyExact(a,i,s,o,l)}else{var k,F;if(1==C&&(k=w.fltree,F=w.fdtree),2==C){oe.F.makeCodes(w.ltree,d),oe.F.revCodes(w.ltree,d),oe.F.makeCodes(w.dtree,u),oe.F.revCodes(w.dtree,u),oe.F.makeCodes(w.itree,h),oe.F.revCodes(w.itree,h),k=w.ltree,F=w.dtree,y(o,l,f-257),y(o,l+=5,g-1),y(o,l+=5,m-4),l+=4;for(var U=0;U<m;U++)y(o,l+3*U,w.itree[1+(w.ordr[U]<<1)]);l+=3*m,l=oe.F._codeTiny(p,w.itree,o,l),l=oe.F._codeTiny(x,w.itree,o,l)}for(var S=i,E=0;E<r;E+=2){for(var M=t[E],I=M>>>23,R=S+(8388607&M);S<R;)l=oe.F._writeLit(a[S++],k,o,l);if(0!=I){var T=t[E+1],_=T>>16,B=T>>8&255,D=255&T;y(o,l=oe.F._writeLit(257+B,k,o,l),I-w.of0[B]),l+=w.exb[B],b(o,l=oe.F._writeLit(D,F,o,l),_-w.df0[D]),l+=w.dxb[D],S+=I}}l=oe.F._writeLit(256,k,o,l)}return l},oe.F._copyExact=function(e,t,r,n,a){var i=a>>>3;return n[i]=r,n[i+1]=r>>>8,n[i+2]=255-n[i],n[i+3]=255-n[i+1],i+=4,n.set(new Uint8Array(e.buffer,t,r),i),a+(r+4<<3)},oe.F.getTrees=function(){for(var e=oe.F.U,t=oe.F._hufTree(e.lhst,e.ltree,15),r=oe.F._hufTree(e.dhst,e.dtree,15),n=[],a=oe.F._lenCodes(e.ltree,n),i=[],s=oe.F._lenCodes(e.dtree,i),o=0;o<n.length;o+=2)e.ihst[n[o]]++;for(o=0;o<i.length;o+=2)e.ihst[i[o]]++;for(var l=oe.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,r,l,a,s,c,n,i]},oe.F.getSecond=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(e[r+1]);return t},oe.F.nonZero=function(e){for(var t="",r=0;r<e.length;r+=2)0!=e[r+1]&&(t+=(r>>1)+",");return t},oe.F.contSize=function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[1+(n<<1)];return r},oe.F._codeTiny=function(e,t,r,n){for(var a=0;a<e.length;a+=2){var i=e[a],s=e[a+1];n=oe.F._writeLit(i,t,r,n);var o=16==i?2:17==i?3:7;i>15&&(oe.F._putsE(r,n,s,o),n+=o)}return n},oe.F._lenCodes=function(e,t){for(var r=e.length;2!=r&&0==e[r-1];)r-=2;for(var n=0;n<r;n+=2){var a=e[n+1],i=n+3<r?e[n+3]:-1,s=n+5<r?e[n+5]:-1,o=0==n?-1:e[n-1];if(0==a&&i==a&&s==a){for(var l=n+5;l+2<r&&e[l+2]==a;)l+=2;(c=Math.min(l+1-n>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),n+=2*c-2}else if(a==o&&i==a&&s==a){for(l=n+5;l+2<r&&e[l+2]==a;)l+=2;var c=Math.min(l+1-n>>>1,6);t.push(16,c-3),n+=2*c-2}else t.push(a,0)}return r>>>1},oe.F._hufTree=function(e,t,r){var n=[],a=e.length,i=t.length,s=0;for(s=0;s<i;s+=2)t[s]=0,t[s+1]=0;for(s=0;s<a;s++)0!=e[s]&&n.push({lit:s,f:e[s]});var o=n.length,l=n.slice(0);if(0==o)return 0;if(1==o){var c=n[0].lit;return l=0==c?1:0,t[1+(c<<1)]=1,t[1+(l<<1)]=1,1}n.sort(function(e,t){return e.f-t.f});var d=n[0],u=n[1],h=0,f=1,g=2;for(n[0]={lit:-1,f:d.f+u.f,l:d,r:u,d:0};f!=o-1;)d=h!=f&&(g==o||n[h].f<n[g].f)?n[h++]:n[g++],u=h!=f&&(g==o||n[h].f<n[g].f)?n[h++]:n[g++],n[f++]={lit:-1,f:d.f+u.f,l:d,r:u};var m=oe.F.setDepth(n[f-1],0);for(m>r&&(oe.F.restrictDepth(l,r,m),m=r),s=0;s<o;s++)t[1+(l[s].lit<<1)]=l[s].d;return m},oe.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(oe.F.setDepth(e.l,t+1),oe.F.setDepth(e.r,t+1))},oe.F.restrictDepth=function(e,t,r){var n=0,a=1<<r-t,i=0;for(e.sort(function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d}),n=0;n<e.length&&e[n].d>t;n++){var s=e[n].d;e[n].d=t,i+=a-(1<<r-s)}for(i>>>=r-t;i>0;)(s=e[n].d)<t?(e[n].d++,i-=1<<t-s-1):n++;for(;n>=0;n--)e[n].d==t&&i<0&&(e[n].d--,i++)},oe.F._goodIndex=function(e,t){var r=0;return t[16|r]<=e&&(r|=16),t[8|r]<=e&&(r|=8),t[4|r]<=e&&(r|=4),t[2|r]<=e&&(r|=2),t[1|r]<=e&&(r|=1),r},oe.F._writeLit=function(e,t,r,n){return oe.F._putsF(r,n,t[e<<1]),n+t[1+(e<<1)]},oe.F.inflate=function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var n=oe.F,a=n._bitsF,i=n._bitsE,s=n._decodeTiny,o=n.makeCodes,l=n.codes2map,c=n._get17,d=n.U,u=null==t;u&&(t=new r(e.length>>>2<<3));for(var h,f,g=0,m=0,p=0,x=0,w=0,b=0,y=0,v=0,A=0;0==g;)if(g=a(e,A,1),m=a(e,A+1,2),A+=3,0!=m){if(u&&(t=oe.F._check(t,v+(1<<17))),1==m&&(h=d.flmap,f=d.fdmap,b=511,y=31),2==m){p=i(e,A,5)+257,x=i(e,A+5,5)+1,w=i(e,A+10,4)+4,A+=14;for(var j=0;j<38;j+=2)d.itree[j]=0,d.itree[j+1]=0;var N=1;for(j=0;j<w;j++){var C=i(e,A+3*j,3);d.itree[1+(d.ordr[j]<<1)]=C,C>N&&(N=C)}A+=3*w,o(d.itree,N),l(d.itree,N,d.imap),h=d.lmap,f=d.dmap,A=s(d.imap,(1<<N)-1,p+x,e,A,d.ttree);var k=n._copyOut(d.ttree,0,p,d.ltree);b=(1<<k)-1;var F=n._copyOut(d.ttree,p,x,d.dtree);y=(1<<F)-1,o(d.ltree,k),l(d.ltree,k,h),o(d.dtree,F),l(d.dtree,F,f)}for(;;){var U=h[c(e,A)&b];A+=15&U;var S=U>>>4;if(S>>>8==0)t[v++]=S;else{if(256==S)break;var E=v+S-254;if(S>264){var M=d.ldef[S-257];E=v+(M>>>3)+i(e,A,7&M),A+=7&M}var I=f[c(e,A)&y];A+=15&I;var R=I>>>4,T=d.ddef[R],_=(T>>>4)+a(e,A,15&T);for(A+=15&T,u&&(t=oe.F._check(t,v+(1<<17)));v<E;)t[v]=t[v++-_],t[v]=t[v++-_],t[v]=t[v++-_],t[v]=t[v++-_];v=E}}}else{7&A&&(A+=8-(7&A));var B=4+(A>>>3),D=e[B-4]|e[B-3]<<8;u&&(t=oe.F._check(t,v+D)),t.set(new r(e.buffer,e.byteOffset+B,D),v),A=B+D<<3,v+=D}return t.length==v?t:t.slice(0,v)},oe.F._check=function(e,t){var r=e.length;if(t<=r)return e;var n=new Uint8Array(Math.max(r<<1,t));return n.set(e,0),n},oe.F._decodeTiny=function(e,t,r,n,a,i){for(var s=oe.F._bitsE,o=oe.F._get17,l=0;l<r;){var c=e[o(n,a)&t];a+=15&c;var d=c>>>4;if(d<=15)i[l]=d,l++;else{var u=0,h=0;16==d?(h=3+s(n,a,2),a+=2,u=i[l-1]):17==d?(h=3+s(n,a,3),a+=3):18==d&&(h=11+s(n,a,7),a+=7);for(var f=l+h;l<f;)i[l]=u,l++}}return a},oe.F._copyOut=function(e,t,r,n){for(var a=0,i=0,s=n.length>>>1;i<r;){var o=e[i+t];n[i<<1]=0,n[1+(i<<1)]=o,o>a&&(a=o),i++}for(;i<s;)n[i<<1]=0,n[1+(i<<1)]=0,i++;return a},oe.F.makeCodes=function(e,t){for(var r,n,a,i,s=oe.F.U,o=e.length,l=s.bl_count,c=0;c<=t;c++)l[c]=0;for(c=1;c<o;c+=2)l[e[c]]++;var d=s.next_code;for(r=0,l[0]=0,n=1;n<=t;n++)r=r+l[n-1]<<1,d[n]=r;for(a=0;a<o;a+=2)0!=(i=e[a+1])&&(e[a]=d[i],d[i]++)},oe.F.codes2map=function(e,t,r){for(var n=e.length,a=oe.F.U.rev15,i=0;i<n;i+=2)if(0!=e[i+1])for(var s=i>>1,o=e[i+1],l=s<<4|o,c=t-o,d=e[i]<<c,u=d+(1<<c);d!=u;)r[a[d]>>>15-t]=l,d++},oe.F.revCodes=function(e,t){for(var r=oe.F.U.rev15,n=15-t,a=0;a<e.length;a+=2){var i=e[a]<<t-e[a+1];e[a]=r[i]>>>n}},oe.F._putsE=function(e,t,r){r<<=7&t;var n=t>>>3;e[n]|=r,e[n+1]|=r>>>8},oe.F._putsF=function(e,t,r){r<<=7&t;var n=t>>>3;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},oe.F._bitsE=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},oe.F._bitsF=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},oe.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},oe.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},oe.F.U=(ie=Uint16Array,se=Uint32Array,{next_code:new ie(16),bl_count:new ie(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new ie(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new se(32),flmap:new ie(512),fltree:[],fdmap:new ie(32),fdtree:[],lmap:new ie(32768),ltree:[],ttree:[],dmap:new ie(32768),dtree:[],imap:new ie(512),itree:[],rev15:new ie(32768),lhst:new se(286),dhst:new se(30),ihst:new se(19),lits:new se(15e3),strt:new ie(65536),prev:new ie(32768)}),function(){for(var e=oe.F.U,t=0;t<32768;t++){var r=t;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.rev15[t]=(r>>>16|r<<16)>>>17}function n(e,t,r){for(;0!=t--;)e.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];n(e.fltree,144,8),n(e.fltree,112,9),n(e.fltree,24,7),n(e.fltree,8,8),oe.F.makeCodes(e.fltree,9),oe.F.codes2map(e.fltree,9,e.flmap),oe.F.revCodes(e.fltree,9),n(e.fdtree,32,5),oe.F.makeCodes(e.fdtree,5),oe.F.codes2map(e.fdtree,5,e.fdmap),oe.F.revCodes(e.fdtree,5),n(e.itree,19,0),n(e.ltree,286,0),n(e.dtree,30,0),n(e.ttree,320,0)}();var de,ue=(de={__proto__:null,default:le},[le].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(t){if("default"!==t&&!(t in de)){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(de,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})}),Object.freeze(de));const he=function(){var e={nextZero(e,t){for(;0!=e[t];)t++;return t},readUshort:(e,t)=>e[t]<<8|e[t+1],writeUshort(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},readUint:(e,t)=>16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3]),writeUint(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},readASCII(e,t,r){let n="";for(let a=0;a<r;a++)n+=String.fromCharCode(e[t+a]);return n},writeASCII(e,t,r){for(let n=0;n<r.length;n++)e[t+n]=r.charCodeAt(n)},readBytes(e,t,r){const n=[];for(let a=0;a<r;a++)n.push(e[t+a]);return n},pad:e=>e.length<2?`0${e}`:e,readUTF8(t,r,n){let a,i="";for(let o=0;o<n;o++)i+=`%${e.pad(t[r+o].toString(16))}`;try{a=decodeURIComponent(i)}catch(s){return e.readASCII(t,r,n)}return a}};function t(t,r,n,a){const s=r*n,o=i(a),l=Math.ceil(r*o/8),c=new Uint8Array(4*s),d=new Uint32Array(c.buffer),{ctype:u}=a,{depth:h}=a,f=e.readUshort;if(6==u){const e=s<<2;if(8==h)for(var g=0;g<e;g+=4)c[g]=t[g],c[g+1]=t[g+1],c[g+2]=t[g+2],c[g+3]=t[g+3];if(16==h)for(g=0;g<e;g++)c[g]=t[g<<1]}else if(2==u){const e=a.tabs.tRNS;if(null==e){if(8==h)for(g=0;g<s;g++){var m=3*g;d[g]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m]}if(16==h)for(g=0;g<s;g++)m=6*g,d[g]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m]}else{var p=e[0];const r=e[1],n=e[2];if(8==h)for(g=0;g<s;g++){var x=g<<2;m=3*g,d[g]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m],t[m]==p&&t[m+1]==r&&t[m+2]==n&&(c[x+3]=0)}if(16==h)for(g=0;g<s;g++)x=g<<2,m=6*g,d[g]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m],f(t,m)==p&&f(t,m+2)==r&&f(t,m+4)==n&&(c[x+3]=0)}}else if(3==u){const e=a.tabs.PLTE,i=a.tabs.tRNS,o=i?i.length:0;if(1==h)for(var w=0;w<n;w++){var b=w*l,y=w*r;for(g=0;g<r;g++){x=y+g<<2;var v=3*(A=t[b+(g>>3)]>>7-(7&g)&1);c[x]=e[v],c[x+1]=e[v+1],c[x+2]=e[v+2],c[x+3]=A<o?i[A]:255}}if(2==h)for(w=0;w<n;w++)for(b=w*l,y=w*r,g=0;g<r;g++)x=y+g<<2,v=3*(A=t[b+(g>>2)]>>6-((3&g)<<1)&3),c[x]=e[v],c[x+1]=e[v+1],c[x+2]=e[v+2],c[x+3]=A<o?i[A]:255;if(4==h)for(w=0;w<n;w++)for(b=w*l,y=w*r,g=0;g<r;g++)x=y+g<<2,v=3*(A=t[b+(g>>1)]>>4-((1&g)<<2)&15),c[x]=e[v],c[x+1]=e[v+1],c[x+2]=e[v+2],c[x+3]=A<o?i[A]:255;if(8==h)for(g=0;g<s;g++){var A;x=g<<2,v=3*(A=t[g]),c[x]=e[v],c[x+1]=e[v+1],c[x+2]=e[v+2],c[x+3]=A<o?i[A]:255}}else if(4==u){if(8==h)for(g=0;g<s;g++){x=g<<2;var j=t[N=g<<1];c[x]=j,c[x+1]=j,c[x+2]=j,c[x+3]=t[N+1]}if(16==h)for(g=0;g<s;g++){var N;x=g<<2,j=t[N=g<<2],c[x]=j,c[x+1]=j,c[x+2]=j,c[x+3]=t[N+2]}}else if(0==u)for(p=a.tabs.tRNS?a.tabs.tRNS:-1,w=0;w<n;w++){const e=w*l,n=w*r;if(1==h)for(var C=0;C<r;C++){var k=(j=255*(t[e+(C>>>3)]>>>7-(7&C)&1))==255*p?0:255;d[n+C]=k<<24|j<<16|j<<8|j}else if(2==h)for(C=0;C<r;C++)k=(j=85*(t[e+(C>>>2)]>>>6-((3&C)<<1)&3))==85*p?0:255,d[n+C]=k<<24|j<<16|j<<8|j;else if(4==h)for(C=0;C<r;C++)k=(j=17*(t[e+(C>>>1)]>>>4-((1&C)<<2)&15))==17*p?0:255,d[n+C]=k<<24|j<<16|j<<8|j;else if(8==h)for(C=0;C<r;C++)k=(j=t[e+C])==p?0:255,d[n+C]=k<<24|j<<16|j<<8|j;else if(16==h)for(C=0;C<r;C++)j=t[e+(C<<1)],k=f(t,e+(C<<1))==p?0:255,d[n+C]=k<<24|j<<16|j<<8|j}return c}function r(e,t,r,o){const l=i(e),c=Math.ceil(r*l/8),d=new Uint8Array((c+1+e.interlace)*o);return t=e.tabs.CgBI?a(t,d):n(t,d),0==e.interlace?t=s(t,e,0,r,o):1==e.interlace&&(t=function(e,t){const r=t.width,n=t.height,a=i(t),o=a>>3,l=Math.ceil(r*a/8),c=new Uint8Array(n*l);let d=0;const u=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],g=[8,8,4,4,2,2,1];let m=0;for(;m<7;){const i=f[m],x=g[m];let w=0,b=0,y=u[m];for(;y<n;)y+=i,b++;let v=h[m];for(;v<r;)v+=x,w++;const A=Math.ceil(w*a/8);s(e,t,d,w,b);let j=0,N=u[m];for(;N<n;){let t=h[m],n=d+j*A<<3;for(;t<r;){var p;if(1==a&&(p=(p=e[n>>3])>>7-(7&n)&1,c[N*l+(t>>3)]|=p<<7-(7&t)),2==a&&(p=(p=e[n>>3])>>6-(7&n)&3,c[N*l+(t>>2)]|=p<<6-((3&t)<<1)),4==a&&(p=(p=e[n>>3])>>4-(7&n)&15,c[N*l+(t>>1)]|=p<<4-((1&t)<<2)),a>=8){const r=N*l+t*o;for(let t=0;t<o;t++)c[r+t]=e[(n>>3)+t]}n+=a,t+=x}j++,N+=i}w*b!=0&&(d+=b*(1+A)),m+=1}return c}(t,e)),t}function n(e,t){return a(new Uint8Array(e.buffer,2,e.length-6),t)}var a=function(){const e={H:{}};return e.H.N=function(t,r){const n=Uint8Array;let a,i,s=0,o=0,l=0,c=0,d=0,u=0,h=0,f=0,g=0;if(3==t[0]&&0==t[1])return r||new n(0);const m=e.H,p=m.b,x=m.e,w=m.R,b=m.n,y=m.A,v=m.Z,A=m.m,j=null==r;for(j&&(r=new n(t.length>>>2<<5));0==s;)if(s=p(t,g,1),o=p(t,g+1,2),g+=3,0!=o){if(j&&(r=e.H.W(r,f+(1<<17))),1==o&&(a=A.J,i=A.h,u=511,h=31),2==o){l=x(t,g,5)+257,c=x(t,g+5,5)+1,d=x(t,g+10,4)+4,g+=14;let e=1;for(var N=0;N<38;N+=2)A.Q[N]=0,A.Q[N+1]=0;for(N=0;N<d;N++){const r=x(t,g+3*N,3);A.Q[1+(A.X[N]<<1)]=r,r>e&&(e=r)}g+=3*d,b(A.Q,e),y(A.Q,e,A.u),a=A.w,i=A.d,g=w(A.u,(1<<e)-1,l+c,t,g,A.v);const r=m.V(A.v,0,l,A.C);u=(1<<r)-1;const n=m.V(A.v,l,c,A.D);h=(1<<n)-1,b(A.C,r),y(A.C,r,a),b(A.D,n),y(A.D,n,i)}for(;;){const e=a[v(t,g)&u];g+=15&e;const n=e>>>4;if(n>>>8==0)r[f++]=n;else{if(256==n)break;{let e=f+n-254;if(n>264){const r=A.q[n-257];e=f+(r>>>3)+x(t,g,7&r),g+=7&r}const a=i[v(t,g)&h];g+=15&a;const s=a>>>4,o=A.c[s],l=(o>>>4)+p(t,g,15&o);for(g+=15&o;f<e;)r[f]=r[f++-l],r[f]=r[f++-l],r[f]=r[f++-l],r[f]=r[f++-l];f=e}}}}else{7&g&&(g+=8-(7&g));const a=4+(g>>>3),i=t[a-4]|t[a-3]<<8;j&&(r=e.H.W(r,f+i)),r.set(new n(t.buffer,t.byteOffset+a,i),f),g=a+i<<3,f+=i}return r.length==f?r:r.slice(0,f)},e.H.W=function(e,t){const r=e.length;if(t<=r)return e;const n=new Uint8Array(r<<1);return n.set(e,0),n},e.H.R=function(t,r,n,a,i,s){const o=e.H.e,l=e.H.Z;let c=0;for(;c<n;){const e=t[l(a,i)&r];i+=15&e;const n=e>>>4;if(n<=15)s[c]=n,c++;else{let e=0,t=0;16==n?(t=3+o(a,i,2),i+=2,e=s[c-1]):17==n?(t=3+o(a,i,3),i+=3):18==n&&(t=11+o(a,i,7),i+=7);const r=c+t;for(;c<r;)s[c]=e,c++}}return i},e.H.V=function(e,t,r,n){let a=0,i=0;const s=n.length>>>1;for(;i<r;){const r=e[i+t];n[i<<1]=0,n[1+(i<<1)]=r,r>a&&(a=r),i++}for(;i<s;)n[i<<1]=0,n[1+(i<<1)]=0,i++;return a},e.H.n=function(t,r){const n=e.H.m,a=t.length;let i,s,o,l;const c=n.j;for(var d=0;d<=r;d++)c[d]=0;for(d=1;d<a;d+=2)c[t[d]]++;const u=n.K;for(i=0,c[0]=0,s=1;s<=r;s++)i=i+c[s-1]<<1,u[s]=i;for(o=0;o<a;o+=2)l=t[o+1],0!=l&&(t[o]=u[l],u[l]++)},e.H.A=function(t,r,n){const a=t.length,i=e.H.m.r;for(let e=0;e<a;e+=2)if(0!=t[e+1]){const a=e>>1,s=t[e+1],o=a<<4|s,l=r-s;let c=t[e]<<l;const d=c+(1<<l);for(;c!=d;)n[i[c]>>>15-r]=o,c++}},e.H.l=function(t,r){const n=e.H.m.r,a=15-r;for(let e=0;e<t.length;e+=2){const i=t[e]<<r-t[e+1];t[e]=n[i]>>>a}},e.H.M=function(e,t,r){r<<=7&t;const n=t>>>3;e[n]|=r,e[n+1]|=r>>>8},e.H.I=function(e,t,r){r<<=7&t;const n=t>>>3;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},e.H.e=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},e.H.b=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){const e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){const t=e.H.m;for(var r=0;r<32768;r++){let e=r;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,t.r[r]=(e>>>16|e<<16)>>>17}function n(e,t,r){for(;0!=t--;)e.push(0,r)}for(r=0;r<32;r++)t.q[r]=t.S[r]<<3|t.T[r],t.c[r]=t.p[r]<<4|t.z[r];n(t._,144,8),n(t._,112,9),n(t._,24,7),n(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),n(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),n(t.Q,19,0),n(t.C,286,0),n(t.D,30,0),n(t.v,320,0)}(),e.H.N}();function i(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function s(e,t,r,n,a){let s=i(t);const l=Math.ceil(n*s/8);let c,d;s=Math.ceil(s/8);let u=e[r],h=0;if(u>1&&(e[r]=[0,0,1][u-2]),3==u)for(h=s;h<l;h++)e[h+1]=e[h+1]+(e[h+1-s]>>>1)&255;for(let i=0;i<a;i++)if(c=r+i*l,d=c+i+1,u=e[d-1],h=0,0==u)for(;h<l;h++)e[c+h]=e[d+h];else if(1==u){for(;h<s;h++)e[c+h]=e[d+h];for(;h<l;h++)e[c+h]=e[d+h]+e[c+h-s]}else if(2==u)for(;h<l;h++)e[c+h]=e[d+h]+e[c+h-l];else if(3==u){for(;h<s;h++)e[c+h]=e[d+h]+(e[c+h-l]>>>1);for(;h<l;h++)e[c+h]=e[d+h]+(e[c+h-l]+e[c+h-s]>>>1)}else{for(;h<s;h++)e[c+h]=e[d+h]+o(0,e[c+h-l],0);for(;h<l;h++)e[c+h]=e[d+h]+o(e[c+h-s],e[c+h-l],e[c+h-s-l])}return e}function o(e,t,r){const n=e+t-r,a=n-e,i=n-t,s=n-r;return a*a<=i*i&&a*a<=s*s?e:i*i<=s*s?t:r}function l(t,r,n){n.width=e.readUint(t,r),r+=4,n.height=e.readUint(t,r),r+=4,n.depth=t[r],r++,n.ctype=t[r],r++,n.compress=t[r],r++,n.filter=t[r],r++,n.interlace=t[r],r++}function c(e,t,r,n,a,i,s,o,l){const c=Math.min(t,a),d=Math.min(r,i);let u=0,h=0;for(let v=0;v<d;v++)for(let r=0;r<c;r++)if(s>=0&&o>=0?(u=v*t+r<<2,h=(o+v)*a+s+r<<2):(u=(-o+v)*t-s+r<<2,h=v*a+r<<2),0==l)n[h]=e[u],n[h+1]=e[u+1],n[h+2]=e[u+2],n[h+3]=e[u+3];else if(1==l){var f=e[u+3]*(1/255),g=e[u]*f,m=e[u+1]*f,p=e[u+2]*f,x=n[h+3]*(1/255),w=n[h]*x,b=n[h+1]*x,y=n[h+2]*x;const t=1-f,r=f+x*t,a=0==r?0:1/r;n[h+3]=255*r,n[h+0]=(g+w*t)*a,n[h+1]=(m+b*t)*a,n[h+2]=(p+y*t)*a}else if(2==l)f=e[u+3],g=e[u],m=e[u+1],p=e[u+2],x=n[h+3],w=n[h],b=n[h+1],y=n[h+2],f==x&&g==w&&m==b&&p==y?(n[h]=0,n[h+1]=0,n[h+2]=0,n[h+3]=0):(n[h]=g,n[h+1]=m,n[h+2]=p,n[h+3]=f);else if(3==l){if(f=e[u+3],g=e[u],m=e[u+1],p=e[u+2],x=n[h+3],w=n[h],b=n[h+1],y=n[h+2],f==x&&g==w&&m==b&&p==y)continue;if(f<220&&x>20)return!1}return!0}return{decode:function(t){const i=new Uint8Array(t);let s=8;const o=e,c=o.readUshort,d=o.readUint,u={tabs:{},frames:[]},h=new Uint8Array(i.length);let f,g=0,m=0;const p=[137,80,78,71,13,10,26,10];for(var x=0;x<8;x++)if(i[x]!=p[x])throw"The input is not a PNG file!";for(;s<i.length;){const e=o.readUint(i,s);s+=4;const t=o.readASCII(i,s,4);if(s+=4,"IHDR"==t)l(i,s,u);else if("iCCP"==t){for(var w=s;0!=i[w];)w++;o.readASCII(i,s,w-s),i[w+1];const r=i.slice(w+2,s+e);let l=null;try{l=n(r)}catch(C){l=a(r)}u.tabs[t]=l}else if("CgBI"==t)u.tabs[t]=i.slice(s,s+4);else if("IDAT"==t){for(x=0;x<e;x++)h[g+x]=i[s+x];g+=e}else if("acTL"==t)u.tabs[t]={num_frames:d(i,s),num_plays:d(i,s+4)},f=new Uint8Array(i.length);else if("fcTL"==t){0!=m&&((N=u.frames[u.frames.length-1]).data=r(u,f.slice(0,m),N.rect.width,N.rect.height),m=0);const e={x:d(i,s+12),y:d(i,s+16),width:d(i,s+4),height:d(i,s+8)};let t=c(i,s+22);t=c(i,s+20)/(0==t?100:t);const n={rect:e,delay:Math.round(1e3*t),dispose:i[s+24],blend:i[s+25]};u.frames.push(n)}else if("fdAT"==t){for(x=0;x<e-4;x++)f[m+x]=i[s+x+4];m+=e-4}else if("pHYs"==t)u.tabs[t]=[o.readUint(i,s),o.readUint(i,s+4),i[s+8]];else if("cHRM"==t)for(u.tabs[t]=[],x=0;x<8;x++)u.tabs[t].push(o.readUint(i,s+4*x));else if("tEXt"==t||"zTXt"==t){null==u.tabs[t]&&(u.tabs[t]={});var b=o.nextZero(i,s),y=o.readASCII(i,s,b-s),v=s+e-b-1;if("tEXt"==t)j=o.readASCII(i,b+1,v);else{var A=n(i.slice(b+2,b+2+v));j=o.readUTF8(A,0,A.length)}u.tabs[t][y]=j}else if("iTXt"==t){null==u.tabs[t]&&(u.tabs[t]={}),b=0,w=s,b=o.nextZero(i,w),y=o.readASCII(i,w,b-w);const r=i[w=b+1];var j;i[w+1],w+=2,b=o.nextZero(i,w),o.readASCII(i,w,b-w),w=b+1,b=o.nextZero(i,w),o.readUTF8(i,w,b-w),v=e-((w=b+1)-s),0==r?j=o.readUTF8(i,w,v):(A=n(i.slice(w,w+v)),j=o.readUTF8(A,0,A.length)),u.tabs[t][y]=j}else if("PLTE"==t)u.tabs[t]=o.readBytes(i,s,e);else if("hIST"==t){const e=u.tabs.PLTE.length/3;for(u.tabs[t]=[],x=0;x<e;x++)u.tabs[t].push(c(i,s+2*x))}else if("tRNS"==t)3==u.ctype?u.tabs[t]=o.readBytes(i,s,e):0==u.ctype?u.tabs[t]=c(i,s):2==u.ctype&&(u.tabs[t]=[c(i,s),c(i,s+2),c(i,s+4)]);else if("gAMA"==t)u.tabs[t]=o.readUint(i,s)/1e5;else if("sRGB"==t)u.tabs[t]=i[s];else if("bKGD"==t)0==u.ctype||4==u.ctype?u.tabs[t]=[c(i,s)]:2==u.ctype||6==u.ctype?u.tabs[t]=[c(i,s),c(i,s+2),c(i,s+4)]:3==u.ctype&&(u.tabs[t]=i[s]);else if("IEND"==t)break;s+=e,o.readUint(i,s),s+=4}var N;return 0!=m&&((N=u.frames[u.frames.length-1]).data=r(u,f.slice(0,m),N.rect.width,N.rect.height)),u.data=r(u,h,u.width,u.height),delete u.compress,delete u.interlace,delete u.filter,u},toRGBA8:function(e){const r=e.width,n=e.height;if(null==e.tabs.acTL)return[t(e.data,r,n,e).buffer];const a=[];null==e.frames[0].data&&(e.frames[0].data=e.data);const i=r*n*4,s=new Uint8Array(i),o=new Uint8Array(i),l=new Uint8Array(i);for(let u=0;u<e.frames.length;u++){const h=e.frames[u],f=h.rect.x,g=h.rect.y,m=h.rect.width,p=h.rect.height,x=t(h.data,m,p,e);if(0!=u)for(var d=0;d<i;d++)l[d]=s[d];if(0==h.blend?c(x,m,p,s,r,n,f,g,0):1==h.blend&&c(x,m,p,s,r,n,f,g,1),a.push(s.buffer.slice(0)),0==h.dispose);else if(1==h.dispose)c(o,m,p,s,r,n,f,g,0);else if(2==h.dispose)for(d=0;d<i;d++)s[d]=l[d]}return a},_paeth:o,_copyTile:c,_bin:e}}();!function(){const{_copyTile:e}=he,{_bin:t}=he,r=he._paeth;var n={table:function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let r=t;for(let e=0;e<8;e++)1&r?r=3988292384^r>>>1:r>>>=1;e[t]=r}return e}(),update(e,t,r,a){for(let i=0;i<a;i++)e=n.table[255&(e^t[r+i])]^e>>>8;return e},crc:(e,t,r)=>4294967295^n.update(4294967295,e,t,r)};function a(e,t,r,n){t[r]+=e[0]*n>>4,t[r+1]+=e[1]*n>>4,t[r+2]+=e[2]*n>>4,t[r+3]+=e[3]*n>>4}function i(e){return Math.max(0,Math.min(255,e))}function s(e,t){const r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i}function o(e,t,r,n,o,l,c){null==c&&(c=1);const d=n.length,u=[];for(var h=0;h<d;h++){const e=n[h];u.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(h=0;h<d;h++){let e=4294967295;for(var f=0,g=0;g<d;g++){var m=s(u[h],u[g]);g!=h&&m<e&&(e=m,f=g)}}const p=new Uint32Array(o.buffer),x=new Int16Array(t*r*4),w=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(h=0;h<w.length;h++)w[h]=255*((w[h]+.5)/16-.5);for(let y=0;y<r;y++)for(let o=0;o<t;o++){var b;h=4*(y*t+o),2!=c?b=[i(e[h]+x[h]),i(e[h+1]+x[h+1]),i(e[h+2]+x[h+2]),i(e[h+3]+x[h+3])]:(m=w[4*(3&y)+(3&o)],b=[i(e[h]+m),i(e[h+1]+m),i(e[h+2]+m),i(e[h+3]+m)]),f=0;let v=16777215;for(g=0;g<d;g++){const e=s(b,u[g]);e<v&&(v=e,f=g)}const A=u[f],j=[b[0]-A[0],b[1]-A[1],b[2]-A[2],b[3]-A[3]];1==c&&(o!=t-1&&a(j,x,h+4,7),y!=r-1&&(0!=o&&a(j,x,h+4*t-4,3),a(j,x,h+4*t,5),o!=t-1&&a(j,x,h+4*t+4,1))),l[h>>2]=f,p[h>>2]=n[f]}}function l(e,r,a,i,s){null==s&&(s={});const{crc:o}=n,l=t.writeUint,c=t.writeUshort,d=t.writeASCII;let u=8;const h=e.frames.length>1;let f,g=!1,m=33+(h?20:0);if(null!=s.sRGB&&(m+=13),null!=s.pHYs&&(m+=21),null!=s.iCCP&&(f=pako.deflate(s.iCCP),m+=21+f.length+4),3==e.ctype){for(var p=e.plte.length,x=0;x<p;x++)e.plte[x]>>>24!=255&&(g=!0);m+=8+3*p+4+(g?8+1*p+4:0)}for(var w=0;w<e.frames.length;w++)h&&(m+=38),m+=(A=e.frames[w]).cimg.length+12,0!=w&&(m+=4);m+=12;const b=new Uint8Array(m),y=[137,80,78,71,13,10,26,10];for(x=0;x<8;x++)b[x]=y[x];if(l(b,u,13),u+=4,d(b,u,"IHDR"),u+=4,l(b,u,r),u+=4,l(b,u,a),u+=4,b[u]=e.depth,u++,b[u]=e.ctype,u++,b[u]=0,u++,b[u]=0,u++,b[u]=0,u++,l(b,u,o(b,u-17,17)),u+=4,null!=s.sRGB&&(l(b,u,1),u+=4,d(b,u,"sRGB"),u+=4,b[u]=s.sRGB,u++,l(b,u,o(b,u-5,5)),u+=4),null!=s.iCCP){const e=13+f.length;l(b,u,e),u+=4,d(b,u,"iCCP"),u+=4,d(b,u,"ICC profile"),u+=11,u+=2,b.set(f,u),u+=f.length,l(b,u,o(b,u-(e+4),e+4)),u+=4}if(null!=s.pHYs&&(l(b,u,9),u+=4,d(b,u,"pHYs"),u+=4,l(b,u,s.pHYs[0]),u+=4,l(b,u,s.pHYs[1]),u+=4,b[u]=s.pHYs[2],u++,l(b,u,o(b,u-13,13)),u+=4),h&&(l(b,u,8),u+=4,d(b,u,"acTL"),u+=4,l(b,u,e.frames.length),u+=4,l(b,u,null!=s.loop?s.loop:0),u+=4,l(b,u,o(b,u-12,12)),u+=4),3==e.ctype){for(l(b,u,3*(p=e.plte.length)),u+=4,d(b,u,"PLTE"),u+=4,x=0;x<p;x++){const t=3*x,r=e.plte[x],n=255&r,a=r>>>8&255,i=r>>>16&255;b[u+t+0]=n,b[u+t+1]=a,b[u+t+2]=i}if(u+=3*p,l(b,u,o(b,u-3*p-4,3*p+4)),u+=4,g){for(l(b,u,p),u+=4,d(b,u,"tRNS"),u+=4,x=0;x<p;x++)b[u+x]=e.plte[x]>>>24&255;u+=p,l(b,u,o(b,u-p-4,p+4)),u+=4}}let v=0;for(w=0;w<e.frames.length;w++){var A=e.frames[w];h&&(l(b,u,26),u+=4,d(b,u,"fcTL"),u+=4,l(b,u,v++),u+=4,l(b,u,A.rect.width),u+=4,l(b,u,A.rect.height),u+=4,l(b,u,A.rect.x),u+=4,l(b,u,A.rect.y),u+=4,c(b,u,i[w]),u+=2,c(b,u,1e3),u+=2,b[u]=A.dispose,u++,b[u]=A.blend,u++,l(b,u,o(b,u-30,30)),u+=4);const t=A.cimg;l(b,u,(p=t.length)+(0==w?0:4)),u+=4;const r=u;d(b,u,0==w?"IDAT":"fdAT"),u+=4,0!=w&&(l(b,u,v++),u+=4),b.set(t,u),u+=p,l(b,u,o(b,r,u-r)),u+=4}return l(b,u,0),u+=4,d(b,u,"IEND"),u+=4,l(b,u,o(b,u-4,4)),u+=4,b.buffer}function c(e,t,r){for(let n=0;n<e.frames.length;n++){const a=e.frames[n];a.rect.width;const i=a.rect.height,s=new Uint8Array(i*a.bpl+i);a.cimg=f(a.img,i,a.bpp,a.bpl,s,t,r)}}function d(t,r,n,a,i){const s=i[0],l=i[1],c=i[2],d=i[3],f=i[4],g=i[5];let p=6,x=8,w=255;for(var b=0;b<t.length;b++){const e=new Uint8Array(t[b]);for(var y=e.length,v=0;v<y;v+=4)w&=e[v+3]}const A=255!=w,j=function(t,r,n,a,i,s){const o=[];for(var l=0;l<t.length;l++){const u=new Uint8Array(t[l]),f=new Uint32Array(u.buffer);var c;let m=0,p=0,x=r,w=n,b=a?1:0;if(0!=l){const y=s||a||1==l||0!=o[l-2].dispose?1:2;let v=0,A=1e9;for(let e=0;e<y;e++){var d=new Uint8Array(t[l-1-e]);const a=new Uint32Array(t[l-1-e]);let s=r,o=n,c=-1,u=-1;for(let e=0;e<n;e++)for(let t=0;t<r;t++)f[g=e*r+t]!=a[g]&&(t<s&&(s=t),t>c&&(c=t),e<o&&(o=e),e>u&&(u=e));-1==c&&(s=o=c=u=0),i&&(!(1&~s)&&s--,!(1&~o)&&o--);const h=(c-s+1)*(u-o+1);h<A&&(A=h,v=e,m=s,p=o,x=c-s+1,w=u-o+1)}d=new Uint8Array(t[l-1-v]),1==v&&(o[l-1].dispose=2),c=new Uint8Array(x*w*4),e(d,r,n,c,x,w,-m,-p,0),b=e(u,r,n,c,x,w,-m,-p,3)?1:0,1==b?h(u,r,n,c,{x:m,y:p,width:x,height:w}):e(u,r,n,c,x,w,-m,-p,0)}else c=u.slice(0);o.push({rect:{x:m,y:p,width:x,height:w},img:c,blend:b,dispose:0})}if(a)for(l=0;l<o.length;l++){if(1==(m=o[l]).blend)continue;const e=m.rect,a=o[l-1].rect,s=Math.min(e.x,a.x),c=Math.min(e.y,a.y),d={x:s,y:c,width:Math.max(e.x+e.width,a.x+a.width)-s,height:Math.max(e.y+e.height,a.y+a.height)-c};o[l-1].dispose=1,l-1!=0&&u(t,r,n,o,l-1,d,i),u(t,r,n,o,l,d,i)}let f=0;if(1!=t.length)for(var g=0;g<o.length;g++){var m;f+=(m=o[g]).rect.width*m.rect.height}return o}(t,r,n,s,l,c),N={},C=[],k=[];if(0!=a){const e=[];for(v=0;v<j.length;v++)e.push(j[v].img.buffer);const t=m(function(e){let t=0;for(var r=0;r<e.length;r++)t+=e[r].byteLength;const n=new Uint8Array(t);let a=0;for(r=0;r<e.length;r++){const t=new Uint8Array(e[r]),i=t.length;for(let e=0;e<i;e+=4){let r=t[e],i=t[e+1],s=t[e+2];const o=t[e+3];0==o&&(r=i=s=0),n[a+e]=r,n[a+e+1]=i,n[a+e+2]=s,n[a+e+3]=o}a+=i}return n.buffer}(e),a);for(v=0;v<t.plte.length;v++)C.push(t.plte[v].est.rgba);let r=0;for(v=0;v<j.length;v++){const e=(U=j[v]).img.length;var F=new Uint8Array(t.inds.buffer,r>>2,e>>2);k.push(F);const n=new Uint8Array(t.abuf,r,e);g&&o(U.img,U.rect.width,U.rect.height,C,n,F),U.img.set(n),r+=e}}else for(b=0;b<j.length;b++){var U=j[b];const e=new Uint32Array(U.img.buffer);var S=U.rect.width;for(y=e.length,F=new Uint8Array(y),k.push(F),v=0;v<y;v++){const t=e[v];if(0!=v&&t==e[v-1])F[v]=F[v-1];else if(v>S&&t==e[v-S])F[v]=F[v-S];else{let e=N[t];if(null==e&&(N[t]=e=C.length,C.push(t),C.length>=300))break;F[v]=e}}}const E=C.length;for(E<=256&&0==f&&(x=E<=2?1:E<=4?2:E<=16?4:8,x=Math.max(x,d)),b=0;b<j.length;b++){(U=j[b]).rect.x,U.rect.y,S=U.rect.width;const e=U.rect.height;let t=U.img;new Uint32Array(t.buffer);let r=4*S,n=4;if(E<=256&&0==f){r=Math.ceil(x*S/8);var M=new Uint8Array(r*e);const a=k[b];for(let t=0;t<e;t++){v=t*r;const e=t*S;if(8==x)for(var I=0;I<S;I++)M[v+I]=a[e+I];else if(4==x)for(I=0;I<S;I++)M[v+(I>>1)]|=a[e+I]<<4-4*(1&I);else if(2==x)for(I=0;I<S;I++)M[v+(I>>2)]|=a[e+I]<<6-2*(3&I);else if(1==x)for(I=0;I<S;I++)M[v+(I>>3)]|=a[e+I]<<7-1*(7&I)}t=M,p=3,n=1}else if(0==A&&1==j.length){M=new Uint8Array(S*e*3);const a=S*e;for(v=0;v<a;v++){const e=3*v,r=4*v;M[e]=t[r],M[e+1]=t[r+1],M[e+2]=t[r+2]}t=M,p=2,n=3,r=3*S}U.img=t,U.bpl=r,U.bpp=n}return{ctype:p,depth:x,plte:C,frames:j}}function u(t,r,n,a,i,s,o){const l=Uint8Array,c=Uint32Array,d=new l(t[i-1]),u=new c(t[i-1]),f=i+1<t.length?new l(t[i+1]):null,g=new l(t[i]),m=new c(g.buffer);let p=r,x=n,w=-1,b=-1;for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++){const n=s.x+t,o=s.y+e,l=o*r+n,c=m[l];0==c||0==a[i-1].dispose&&u[l]==c&&(null==f||0!=f[4*l+3])||(n<p&&(p=n),n>w&&(w=n),o<x&&(x=o),o>b&&(b=o))}-1==w&&(p=x=w=b=0),o&&(!(1&~p)&&p--,!(1&~x)&&x--),s={x:p,y:x,width:w-p+1,height:b-x+1};const y=a[i];y.rect=s,y.blend=1,y.img=new Uint8Array(s.width*s.height*4),0==a[i-1].dispose?(e(d,r,n,y.img,s.width,s.height,-s.x,-s.y,0),h(g,r,n,y.img,s)):e(g,r,n,y.img,s.width,s.height,-s.x,-s.y,0)}function h(t,r,n,a,i){e(t,r,n,a,i.width,i.height,-i.x,-i.y,2)}function f(e,t,r,n,a,i,s){const o=[];let l,c=[0,1,2,3,4];-1!=i?c=[i]:(t*n>5e5||1==r)&&(c=[0]),s&&(l={level:0});const d=ue;for(var u=0;u<c.length;u++){for(let i=0;i<t;i++)g(a,e,i,n,r,c[u]);o.push(d.deflate(a,l))}let h,f=1e9;for(u=0;u<o.length;u++)o[u].length<f&&(h=u,f=o[u].length);return o[h]}function g(e,t,n,a,i,s){const o=n*a;let l=o+n;if(e[l]=s,l++,0==s)if(a<500)for(var c=0;c<a;c++)e[l+c]=t[o+c];else e.set(new Uint8Array(t.buffer,o,a),l);else if(1==s){for(c=0;c<i;c++)e[l+c]=t[o+c];for(c=i;c<a;c++)e[l+c]=t[o+c]-t[o+c-i]+256&255}else if(0==n){for(c=0;c<i;c++)e[l+c]=t[o+c];if(2==s)for(c=i;c<a;c++)e[l+c]=t[o+c];if(3==s)for(c=i;c<a;c++)e[l+c]=t[o+c]-(t[o+c-i]>>1)+256&255;if(4==s)for(c=i;c<a;c++)e[l+c]=t[o+c]-r(t[o+c-i],0,0)+256&255}else{if(2==s)for(c=0;c<a;c++)e[l+c]=t[o+c]+256-t[o+c-a]&255;if(3==s){for(c=0;c<i;c++)e[l+c]=t[o+c]+256-(t[o+c-a]>>1)&255;for(c=i;c<a;c++)e[l+c]=t[o+c]+256-(t[o+c-a]+t[o+c-i]>>1)&255}if(4==s){for(c=0;c<i;c++)e[l+c]=t[o+c]+256-r(0,t[o+c-a],0)&255;for(c=i;c<a;c++)e[l+c]=t[o+c]+256-r(t[o+c-i],t[o+c-a],t[o+c-i-a])&255}}}function m(e,t){const r=new Uint8Array(e),n=r.slice(0),a=new Uint32Array(n.buffer),i=p(n,t),s=i[0],o=i[1],l=r.length,c=new Uint8Array(l>>2);let d;if(r.length<2e7)for(var u=0;u<l;u+=4)d=x(s,h=r[u]*(1/255),f=r[u+1]*(1/255),g=r[u+2]*(1/255),m=r[u+3]*(1/255)),c[u>>2]=d.ind,a[u>>2]=d.est.rgba;else for(u=0;u<l;u+=4){var h=r[u]*(1/255),f=r[u+1]*(1/255),g=r[u+2]*(1/255),m=r[u+3]*(1/255);for(d=s;d.left;)d=w(d.est,h,f,g,m)<=0?d.left:d.right;c[u>>2]=d.ind,a[u>>2]=d.est.rgba}return{abuf:n.buffer,inds:c,plte:o}}function p(e,t,r){null==r&&(r=1e-4);const n=new Uint32Array(e.buffer),a={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};a.bst=v(e,a.i0,a.i1),a.est=A(a.bst);const i=[a];for(;i.length<t;){let t=0,a=0;for(var s=0;s<i.length;s++)i[s].est.L>t&&(t=i[s].est.L,a=s);if(t<r)break;const o=i[a],l=b(e,n,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=l||o.i1<=l){o.est.L=0;continue}const c={i0:o.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};c.bst=v(e,c.i0,c.i1),c.est=A(c.bst);const d={i0:l,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(d.bst={R:[],m:[],N:o.bst.N-c.bst.N},s=0;s<16;s++)d.bst.R[s]=o.bst.R[s]-c.bst.R[s];for(s=0;s<4;s++)d.bst.m[s]=o.bst.m[s]-c.bst.m[s];d.est=A(d.bst),o.left=c,o.right=d,i[a]=c,i.push(d)}for(i.sort((e,t)=>t.bst.N-e.bst.N),s=0;s<i.length;s++)i[s].ind=s;return[a,i]}function x(e,t,r,n,a){if(null==e.left)return e.tdst=function(e,t,r,n,a){const i=t-e[0],s=r-e[1],o=n-e[2],l=a-e[3];return i*i+s*s+o*o+l*l}(e.est.q,t,r,n,a),e;const i=w(e.est,t,r,n,a);let s=e.left,o=e.right;i>0&&(s=e.right,o=e.left);const l=x(s,t,r,n,a);if(l.tdst<=i*i)return l;const c=x(o,t,r,n,a);return c.tdst<l.tdst?c:l}function w(e,t,r,n,a){const{e:i}=e;return i[0]*t+i[1]*r+i[2]*n+i[3]*a-e.eMq}function b(e,t,r,n,a,i){for(n-=4;r<n;){for(;y(e,r,a)<=i;)r+=4;for(;y(e,n,a)>i;)n-=4;if(r>=n)break;const s=t[r>>2];t[r>>2]=t[n>>2],t[n>>2]=s,r+=4,n-=4}for(;y(e,r,a)>i;)r-=4;return r+4}function y(e,t,r){return e[t]*r[0]+e[t+1]*r[1]+e[t+2]*r[2]+e[t+3]*r[3]}function v(e,t,r){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0],i=r-t>>2;for(let s=t;s<r;s+=4){const t=e[s]*(1/255),r=e[s+1]*(1/255),i=e[s+2]*(1/255),o=e[s+3]*(1/255);a[0]+=t,a[1]+=r,a[2]+=i,a[3]+=o,n[0]+=t*t,n[1]+=t*r,n[2]+=t*i,n[3]+=t*o,n[5]+=r*r,n[6]+=r*i,n[7]+=r*o,n[10]+=i*i,n[11]+=i*o,n[15]+=o*o}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:a,N:i}}function A(e){const{R:t}=e,{m:r}=e,{N:n}=e,a=r[0],i=r[1],s=r[2],o=r[3],l=0==n?0:1/n,c=[t[0]-a*a*l,t[1]-a*i*l,t[2]-a*s*l,t[3]-a*o*l,t[4]-i*a*l,t[5]-i*i*l,t[6]-i*s*l,t[7]-i*o*l,t[8]-s*a*l,t[9]-s*i*l,t[10]-s*s*l,t[11]-s*o*l,t[12]-o*a*l,t[13]-o*i*l,t[14]-o*s*l,t[15]-o*o*l],d=c,u=j;let h=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,g=0;if(0!=n)for(let p=0;p<16&&(h=u.multVec(d,h),g=Math.sqrt(u.dot(h,h)),h=u.sml(1/g,h),!(0!=p&&Math.abs(g-f)<1e-9));p++)f=g;const m=[a*l,i*l,s*l,o*l];return{Cov:c,q:m,e:h,L:f,eMq255:u.dot(u.sml(255,m),h),eMq:u.dot(h,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0]))>>>0}}var j={multVec:(e,t)=>[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]],dot:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],sml:(e,t)=>[e*t[0],e*t[1],e*t[2],e*t[3]]};he.encode=function(e,t,r,n,a,i,s){null==n&&(n=0),null==s&&(s=!1);const o=d(e,t,r,n,[!1,!1,!1,0,s,!1]);return c(o,-1),l(o,t,r,a,i)},he.encodeLL=function(e,t,r,n,a,i,s,o){const d={ctype:0+(1==n?0:2)+(0==a?0:4),depth:i,frames:[]},u=(n+a)*i,h=u*t;for(let l=0;l<e.length;l++)d.frames.push({rect:{x:0,y:0,width:t,height:r},img:new Uint8Array(e[l]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(h/8)});return c(d,0,!0),l(d,t,r,s,o)},he.encode.compress=d,he.encode.dither=o,he.quantize=m,he.quantize.getKDtree=p,he.quantize.getNearest=x}();const fe={toArrayBuffer(e,t){const r=e.width,n=e.height,a=r<<2,i=e.getContext("2d").getImageData(0,0,r,n),s=new Uint32Array(i.data.buffer),o=(32*r+31)/32<<2,l=o*n,c=122+l,d=new ArrayBuffer(c),u=new DataView(d),h=1<<20;let f,g,m,p,x=h,w=0,b=0,y=0;function v(e){u.setUint16(b,e,!0),b+=2}function A(e){u.setUint32(b,e,!0),b+=4}function j(e){b+=e}v(19778),A(c),j(4),A(122),A(108),A(r),A(-n>>>0),v(1),v(32),A(3),A(l),A(2835),A(2835),j(8),A(16711680),A(65280),A(255),A(4278190080),A(1466527264),function e(){for(;w<n&&x>0;){for(p=122+w*o,f=0;f<a;)x--,g=s[y++],m=g>>>24,u.setUint32(p+f,g<<8|m),f+=4;w++}y<s.length?(x=h,setTimeout(e,fe._dly)):t(d)}()},toBlob(e,t){this.toArrayBuffer(e,e=>{t(new Blob([e],{type:"image/bmp"}))})},_dly:9};var ge={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},me={[ge.CHROME]:16384,[ge.FIREFOX]:11180,[ge.DESKTOP_SAFARI]:16384,[ge.IE]:8192,[ge.IOS]:4096,[ge.ETC]:8192};const pe="undefined"!=typeof window,xe="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,we=pe&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),be=(pe||xe)&&(we&&we.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),ye=(pe||xe)&&(we&&we.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function ve(e,t,r=Date.now()){return new Promise(n=>{const a=e.split(","),i=a[0].match(/:(.*?);/)[1],s=globalThis.atob(a[1]);let o=s.length;const l=new Uint8Array(o);for(;o--;)l[o]=s.charCodeAt(o);const c=new Blob([l],{type:i});c.name=t,c.lastModified=r,n(c)})}function Ae(e){return new Promise((t,r)=>{const n=new ye;n.onload=()=>t(n.result),n.onerror=e=>r(e),n.readAsDataURL(e)})}function je(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=e=>r(e),n.src=e})}function Ne(){if(void 0!==Ne.cachedResult)return Ne.cachedResult;let e=ge.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=ge.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=ge.IOS:/Safari/i.test(t)?e=ge.DESKTOP_SAFARI:/Firefox/i.test(t)?e=ge.FIREFOX:(/MSIE/i.test(t)||1==!!document.documentMode)&&(e=ge.IE),Ne.cachedResult=e,Ne.cachedResult}function Ce(e,t){const r=Ne(),n=me[r];let a=e,i=t,s=a*i;const o=a>i?i/a:a/i;for(;s>n*n;){const e=(n+a)/2,t=(n+i)/2;e<t?(i=t,a=t*o):(i=e*o,a=e),s=a*i}return{width:a,height:i}}function ke(e,t){let r,n;try{if(r=new OffscreenCanvas(e,t),n=r.getContext("2d"),null===n)throw new Error("getContext of OffscreenCanvas returns null")}catch(a){r=document.createElement("canvas"),n=r.getContext("2d")}return r.width=e,r.height=t,[r,n]}function Fe(e,t){const{width:r,height:n}=Ce(e.width,e.height),[a,i]=ke(r,n);return t&&/jpe?g/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,a.width,a.height)),i.drawImage(e,0,0,a.width,a.height),a}function Ue(){return void 0!==Ue.cachedResult||(Ue.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),Ue.cachedResult}function Se(e,t={}){return new Promise(function(r,n){let a,i;var s=function(){try{return i=Fe(a,t.fileType||e.type),r([a,i])}catch(s){return n(s)}},o=function(t){try{var r=function(e){try{throw e}catch(t){return n(t)}};try{let t;return Ae(e).then(function(e){try{return t=e,je(t).then(function(e){try{return a=e,function(){try{return s()}catch(e){return n(e)}}()}catch(t){return r(t)}},r)}catch(i){return r(i)}},r)}catch(i){r(i)}}catch(i){return n(i)}};try{if(Ue()||[ge.DESKTOP_SAFARI,ge.MOBILE_SAFARI].includes(Ne()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return a=e,s()}catch(t){return o()}},o)}catch(l){o()}})}function Ee(e,t,r,n,a=1){return new Promise(function(i,s){let o;if("image/png"===t){let i,s,c;return i=e.getContext("2d"),({data:s}=i.getImageData(0,0,e.width,e.height)),c=he.encode([s.buffer],e.width,e.height,4096*a),o=new Blob([c],{type:t}),o.name=r,o.lastModified=n,l.call(this)}{let i=function(){return l.call(this)};if("image/bmp"===t)return new Promise(t=>fe.toBlob(e,t)).then(function(e){try{return o=e,o.name=r,o.lastModified=n,i.call(this)}catch(t){return s(t)}}.bind(this),s);{let l=function(){return i.call(this)};if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:a}).then(function(e){try{return o=e,o.name=r,o.lastModified=n,l.call(this)}catch(t){return s(t)}}.bind(this),s);{let i;return i=e.toDataURL(t,a),ve(i,r,n).then(function(e){try{return o=e,l.call(this)}catch(t){return s(t)}}.bind(this),s)}}}function l(){return i(o)}})}function Me(e){e.width=0,e.height=0}function Ie(){return new Promise(function(e,t){let r,n,a,i;return void 0!==Ie.cachedResult?e(Ie.cachedResult):ve("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return r=s,Se(r).then(function(s){try{return n=s[1],Ee(n,r.type,r.name,r.lastModified).then(function(r){try{return a=r,Me(n),Se(a).then(function(r){try{return i=r[0],Ie.cachedResult=1===i.width&&2===i.height,e(Ie.cachedResult)}catch(n){return t(n)}},t)}catch(s){return t(s)}},t)}catch(o){return t(o)}},t)}catch(o){return t(o)}},t)})}function Re(e){return new Promise((t,r)=>{const n=new ye;n.onload=e=>{const r=new DataView(e.target.result);if(65496!=r.getUint16(0,!1))return t(-2);const n=r.byteLength;let a=2;for(;a<n;){if(r.getUint16(a+2,!1)<=8)return t(-1);const e=r.getUint16(a,!1);if(a+=2,65505==e){if(1165519206!=r.getUint32(a+=2,!1))return t(-1);const e=18761==r.getUint16(a+=6,!1);a+=r.getUint32(a+4,e);const n=r.getUint16(a,e);a+=2;for(let i=0;i<n;i++)if(274==r.getUint16(a+12*i,e))return t(r.getUint16(a+12*i+8,e))}else{if(65280&~e)break;a+=r.getUint16(a,!1)}}return t(-1)},n.onerror=e=>r(e),n.readAsArrayBuffer(e)})}function Te(e,t){const{width:r}=e,{height:n}=e,{maxWidthOrHeight:a}=t;let i,s=e;return isFinite(a)&&(r>a||n>a)&&([s,i]=ke(r,n),r>n?(s.width=a,s.height=n/r*a):(s.width=r/n*a,s.height=a),i.drawImage(e,0,0,s.width,s.height),Me(e)),s}function _e(e,t){const{width:r}=e,{height:n}=e,[a,i]=ke(r,n);switch(t>4&&t<9?(a.width=n,a.height=r):(a.width=r,a.height=n),t){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,n);break;case 4:i.transform(1,0,0,-1,0,n);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,n,0);break;case 7:i.transform(0,-1,-1,0,n,r);break;case 8:i.transform(0,-1,1,0,0,r)}return i.drawImage(e,0,0,r,n),Me(e),a}function Be(e,t,r=0){return new Promise(function(n,a){let i,s,o,l,c,d,u,h,f,g,m,p,x,w,b,y,v,A,j,N;function C(e=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;i+=e,t.onProgress(Math.min(i,100))}function k(e){if(t.signal&&t.signal.aborted)throw t.signal.reason;i=Math.min(Math.max(e,i),100),t.onProgress(i)}return i=r,s=t.maxIteration||10,o=1024*t.maxSizeMB*1024,C(),Se(e,t).then(function(r){try{return[,l]=r,C(),c=Te(l,t),C(),new Promise(function(r,n){var a;if(!(a=t.exifOrientation))return Re(e).then(function(e){try{return a=e,i.call(this)}catch(t){return n(t)}}.bind(this),n);function i(){return r(a)}return i.call(this)}).then(function(r){try{return d=r,C(),Ie().then(function(r){try{return u=r?c:_e(c,d),C(),h=t.initialQuality||1,f=t.fileType||e.type,Ee(u,f,e.name,e.lastModified,h).then(function(r){try{{let d=function(){if(s--&&(b>o||b>x)){let t,r;return t=N?.95*j.width:j.width,r=N?.95*j.height:j.height,[v,A]=ke(t,r),A.drawImage(j,0,0,t,r),h*="image/png"===f?.85:.95,Ee(v,f,e.name,e.lastModified,h).then(function(e){try{return y=e,Me(j),j=v,b=y.size,k(Math.min(99,Math.floor((w-b)/(w-o)*100))),d}catch(t){return a(t)}},a)}return[1]},F=function(){return Me(j),Me(v),Me(c),Me(u),Me(l),k(100),n(y)};return g=r,C(),m=g.size>o,p=g.size>e.size,m||p?(x=e.size,w=g.size,b=w,j=u,N=!t.alwaysKeepResolution&&m,(i=function(e){for(;e;){if(e.then)return void e.then(i,a);try{if(e.pop){if(e.length)return e.pop()?F.call(this):e;e=d}else e=e.call(this)}catch(t){return a(t)}}}.bind(this))(d)):(k(100),n(g));var i}}catch(d){return a(d)}}.bind(this),a)}catch(i){return a(i)}}.bind(this),a)}catch(i){return a(i)}}.bind(this),a)}catch(i){return a(i)}}.bind(this),a)})}let De;function Le(e,t){return new Promise(function(r,n){let a,i,s,o,l,c;if(a={...t},s=0,({onProgress:o}=a),a.maxSizeMB=a.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof a.useWebWorker||a.useWebWorker,delete a.useWebWorker,a.onProgress=e=>{s=e,"function"==typeof o&&o(s)},!(e instanceof Blob||e instanceof be))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return n(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||c)return Be(e,a).then(function(e){try{return i=e,h.call(this)}catch(t){return n(t)}}.bind(this),n);var d=function(){try{return h.call(this)}catch(e){return n(e)}}.bind(this),u=function(t){try{return Be(e,a).then(function(e){try{return i=e,d()}catch(t){return n(t)}},n)}catch(r){return n(r)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",function(e,t){return new Promise((r,n)=>{De||(De=function(e){const t=[];return t.push(e),URL.createObjectURL(new Blob(t))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));const a=new Worker(De);a.addEventListener("message",function(e){if(t.signal&&t.signal.aborted)a.terminate();else if(void 0===e.data.progress){if(e.data.error)return n(new Error(e.data.error)),void a.terminate();r(e.data.file),a.terminate()}else t.onProgress(e.data.progress)}),a.addEventListener("error",n),t.signal&&t.signal.addEventListener("abort",()=>{n(t.signal.reason),a.terminate()}),a.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}(e,a).then(function(e){try{return i=e,d()}catch(t){return u()}},u)}catch(f){u()}function h(){try{i.name=e.name,i.lastModified=e.lastModified}catch(f){}try{a.preserveExif&&"image/jpeg"===e.type&&(!a.fileType||a.fileType&&a.fileType===e.type)&&(i=ne(e,i))}catch(f){}return r(i)}})}Le.getDataUrlFromFile=Ae,Le.getFilefromDataUrl=ve,Le.loadImage=je,Le.drawImageInCanvas=Fe,Le.drawFileInCanvas=Se,Le.canvasToFile=Ee,Le.getExifOrientation=Re,Le.handleMaxWidthOrHeight=Te,Le.followExifOrientation=_e,Le.cleanupCanvasMemory=Me,Le.isAutoOrientationInBrowser=Ie,Le.approximateBelowMaximumCanvasSizeOfBrowser=Ce,Le.copyExifWithoutOrientation=ne,Le.getBrowserName=Ne,Le.version="2.0.2";const Pe=9.99,ze=["image/png","image/jpeg","image/jpg","image/webp","image/gif"],He=[...ze,"application/pdf"],Oe=[".png",".jpg",".jpeg",".webp",".gif",".pdf"],Qe={"2x2":{width:600,height:600},"3x3":{width:900,height:900},"4x4":{width:1200,height:1200},"5x5":{width:1500,height:1500},"6x6":{width:1800,height:1800},"3x4":{width:900,height:1200},"4x6":{width:1200,height:1800},"5x7":{width:1500,height:2100},"2x3":{width:600,height:900},"2.5x3.5":{width:750,height:1050},"4.75x2":{width:1425,height:600},"2.5x2.5":{width:750,height:750}},qe=async(e,t=null)=>{const r=10475274.24;if(e.size<=r)return t&&t(100),e;const n={maxSizeMB:Pe,maxWidthOrHeight:4096,useWebWorker:!0,onProgress:t,fileType:e.type,initialQuality:.9,preserveExif:!1};try{let t=await Le(e,n);if(t.size>r){const r={...n,initialQuality:.8,maxWidthOrHeight:3e3};t=await Le(e,r)}return t instanceof Blob&&!(t instanceof File)?new File([t],e.name,{type:t.type,lastModified:Date.now()}):t}catch(a){throw new Error(`Failed to compress image: ${a.message}`)}},$e=e=>{if(!e)return{isValid:!1,error:"Please select an image file"};if(!He.includes(e.type))return{isValid:!1,error:"Invalid file type. Allowed types: PNG, JPG, JPEG, WebP, GIF, PDF"};const t=e.name.toLowerCase();if(!Oe.some(e=>t.endsWith(e)))return{isValid:!1,error:`Invalid file extension. Allowed: ${Oe.join(", ")}`};const r=e.size/1048576;return r>50?{isValid:!1,error:"File is too large. Maximum size is 50MB"}:{isValid:!0,error:null,details:{name:e.name,type:e.type,size:e.size,sizeMB:r.toFixed(2)}}},Ge=e=>new Promise((t,r)=>{const n=new Image,a=URL.createObjectURL(e);n.onload=()=>{URL.revokeObjectURL(a),t({width:n.naturalWidth,height:n.naturalHeight})},n.onerror=()=>{URL.revokeObjectURL(a),r(new Error("Failed to load image"))},n.src=a}),We=async(e,t)=>{try{const r=await Ge(e),n=Qe[t];if(!n)return{isValid:!0,error:null,details:r};const a=r.width>=n.width||r.width>=n.height,i=r.height>=n.height||r.height>=n.width;return a&&i?{isValid:!0,error:null,details:r}:{isValid:!1,error:`Image resolution (${r.width}x${r.height}) is below the recommended minimum (${n.width}x${n.height}) for size ${t}. This may result in a blurry print.`,details:{...r,minRequired:n,isWarning:!0}}}catch(r){return{isValid:!1,error:`Failed to check image resolution: ${r.message}`}}},Ve=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},Ye=e=>e.size>10475274.24,Xe=(e,t,r,n)=>{const a=e/r,i=t/n;return Math.min(a,i)},Ke=e=>e>=300?{level:"excellent",color:"green",message:"Excellent quality - Print will be crisp and clear"}:e>=200?{level:"good",color:"blue",message:"Good quality - Print will look nice"}:e>=150?{level:"acceptable",color:"yellow",message:"Acceptable quality - Some detail loss possible"}:{level:"low",color:"red",message:"Low quality - Image may appear blurry when printed"},Ze="sml_session_id",Je="sml_session_start",et=()=>{try{let e=localStorage.getItem(Ze);const t=localStorage.getItem(Je);if(e&&t){const r=parseInt(t,10);if(Date.now()-r<864e5)return e;tt()}return e=v(),localStorage.setItem(Ze,e),localStorage.setItem(Je,Date.now().toString()),e}catch(e){return v()}},tt=()=>{try{localStorage.removeItem(Ze),localStorage.removeItem(Je),localStorage.removeItem("sml_session_data")}catch(e){}},rt={IDLE:"idle",VALIDATING:"validating",COMPRESSING:"compressing",UPLOADING:"uploading",COMPLETE:"complete",ERROR:"error"},nt=()=>{const[e,t]=n.useState(null),[r,a]=n.useState(null),[i,s]=n.useState(null),[o,l]=n.useState(!1),[c,d]=n.useState(0),[u,h]=n.useState(rt.IDLE),[f,g]=n.useState(null),[m,p]=n.useState(null),[x,w]=n.useState(null),[b,y]=n.useState(null),[v,A]=n.useState(null),j=n.useRef(null),N=n.useRef(!0),C=n.useCallback(()=>{t(null),a(null),s(null),l(!1),d(0),h(rt.IDLE),g(null),p(null),w(null),y(null),A(null),j.current&&(j.current.abort(),j.current=null)},[]),k=C,F=n.useCallback(()=>{j.current&&(j.current.abort(),j.current=null),C()},[C]),U=n.useCallback(async(e,r={width:5,height:5})=>{g(null),y(null),l(!0),d(0),h(rt.VALIDATING);try{if(!(e=>ze.includes(e.type))(e))throw new Error("Invalid file type. Please upload a JPG, PNG, WebP, or GIF image.");const n=$e(e);if(!n.isValid)throw new Error(n.error);d(10);let i=e;Ye(e)?(h(rt.COMPRESSING),d(20),i=await qe(e,e=>{d(20+Math.round(.5*e))})):d(70);const o=await Ge(i);s(o),d(80);const l=Xe(o.width,o.height,r.width,r.height),c=Ke(l),u={...c,dpi:Math.round(l),originalSize:Ve(e.size),processedSize:Ve(i.size),wasCompressed:e.size!==i.size};A(u),"low"!==c.level&&"acceptable"!==c.level||y(c.message),d(90);const f=await new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(i)});return a(f),t(i),d(100),h(rt.COMPLETE),{success:!0,file:i,dataUrl:f,dimensions:o,quality:u}}catch(n){const e=n.message||"Failed to process image";throw g(new Error(e)),h(rt.ERROR),n}finally{l(!1)}},[]),S=n.useCallback(async(e,r={})=>{var n,i,o,c,u,f;const{targetSize:m}=r;l(!0),d(0),g(null),y(null),p(null),w(null),j.current=new AbortController;try{h(rt.VALIDATING),d(10);const r=$e(e);if(!r.isValid)throw new Error(r.error);let l;try{l=await Ge(e),s(l)}catch(x){throw new Error("Failed to read image. Please try a different file.")}if(m){const t=await We(e,m);!t.isValid&&(null==(n=t.details)?void 0:n.isWarning)&&y(t.error)}if(null==(i=j.current)?void 0:i.signal.aborted)throw new Error("Upload cancelled");d(20),h(rt.COMPRESSING);let g=e;if(Ye(e)){const t=await qe(e,e=>{d(20+Math.round(.3*e))});g=t}if(t(g),null==(o=j.current)?void 0:o.signal.aborted)throw new Error("Upload cancelled");d(50),h(rt.UPLOADING);const v=await(e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const e=n.result.split(",")[1];t(e)},n.onerror=()=>{r(new Error("Failed to read file"))},n.readAsDataURL(e)}))(g),A=await new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(g)});if(a(A),null==(c=j.current)?void 0:c.signal.aborted)throw new Error("Upload cancelled");d(60);const N=et(),C=await R.uploadImage(v,e.name,N);if(null==(u=j.current)?void 0:u.signal.aborted)throw new Error("Upload cancelled");d(100),h(rt.COMPLETE);const k=C.url||C.imageUrl||(null==(f=C.data)?void 0:f.url),F={originalName:e.name,originalSize:e.size,compressedSize:g.size,width:l.width,height:l.height,type:e.type,url:k,uploadedAt:(new Date).toISOString()};return p(k),w(F),{success:!0,url:k,metadata:F,warning:b||null}}catch(v){if(!N.current)return{success:!1,error:"Component unmounted"};const e=v.message||"Failed to upload image";return g(new Error(e)),h(rt.ERROR),{success:!1,error:e}}finally{N.current&&(l(!1),j.current=null)}},[b]),E=n.useCallback(e=>{if(!i)return;const t=Xe(i.width,i.height,e.width,e.height),r=Ke(t);A(e=>e?{...e,...r,dpi:Math.round(t)}:null),"low"===r.level||"acceptable"===r.level?y(r.message):y(null)},[i]),M=n.useCallback(async(e,t=null)=>{var r;const n=$e(e);if(!n.isValid)return n;try{const a=await Ge(e);let i=null;if(t){const n=await We(e,t);!n.isValid&&(null==(r=n.details)?void 0:r.isWarning)&&(i=n.error)}return{isValid:!0,error:null,warning:i,details:{...n.details,...a,formattedSize:Ve(e.size)}}}catch(a){return{isValid:!1,error:"Failed to read image file"}}},[]),I=n.useCallback(async(e,t)=>{var r;e.preventDefault(),e.stopPropagation();const n=null==(r=e.dataTransfer)?void 0:r.files;if(n&&n.length>0)return U(n[0],t)},[U]),T=n.useCallback(async(e,t)=>{var r;const n=null==(r=e.target)?void 0:r.files;if(n&&n.length>0)return U(n[0],t)},[U]);return{imageFile:e,imageDataUrl:r,imageDimensions:i,uploading:o,isLoading:o,progress:c,uploadProgress:c,stage:u,error:f,warning:b,imageUrl:m,imageData:x,qualityInfo:v,hasImage:!!r,upload:S,validate:M,handleFileSelect:U,handleDrop:I,handleInputChange:T,recalculateQuality:E,reset:C,clearImage:k,cancel:F,UPLOAD_STAGES:rt}};function at(e,t="my-design.png"){if(!e)throw new Error("Canvas is not initialized");const r=function(e,t=2){if(!e)throw new Error("Canvas is not initialized");return e.toDataURL({format:"png",quality:1,multiplier:t})}(e,3),n=document.createElement("a");n.download=t,n.href=r,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function it(){const[a,i]=n.useState(l.STICKERS),[o,c]=n.useState("5x5"),[d,u]=n.useState(50),[f,g]=n.useState(""),[p,x]=n.useState("square"),[w,b]=n.useState(0),[v,F]=n.useState(!1),S=n.useRef(null),{imageDataUrl:E,isLoading:M,uploadProgress:I,error:B,qualityInfo:P,hasImage:z,handleFileSelect:O,recalculateQuality:Q,clearImage:q}=nt(),[$,G]=n.useState(!1),[W,V]=n.useState(!1),Y=A(o),ne=n.useCallback(e=>{i(e);const t=h(e);t.length>0&&!t.includes(o)&&c(t[0])},[o]),ae=n.useCallback(e=>{c(e);const t=A(e);Q(t)},[Q]),ie=n.useCallback(e=>{O(e,Y)},[O,Y]),se=n.useCallback(()=>{var e;b(0),null==(e=S.current)||e.reset()},[]),oe=n.useCallback(()=>{var e;null==(e=S.current)||e.fitToCanvas()},[]),le=n.useCallback(()=>{var e;const t=null==(e=S.current)?void 0:e.getCanvas();t&&at(t,`${a}-${o}-preview.png`)},[a,o]),{addToCart:ce}=j(),de=n.useCallback(async()=>{var e;if(z){G(!0),T.info("Starting add to cart process",{productType:a,size:o,shape:p,quantity:d,hasImage:z,hasInstructions:f.length>0});try{_.info("Uploading canvas design to S3");const t=null==(e=S.current)?void 0:e.getCanvas();if(!t)throw new Error("Canvas not available for export");const r=t.toDataURL("image/png",1),n=r.split(",")[1],i=await R.upload.uploadImage({image:n,filename:`custom-${a}-${o}-${Date.now()}.png`,sessionId:et()});if(!i.success)throw new Error(i.error||"Failed to upload image");_.info("Image uploaded successfully",{s3Url:i.s3Url,httpsUrl:i.httpsUrl,fileSize:i.fileSize});const s=m(a,o,d),l=s*d,c={productType:a,productName:`Custom ${"fridge_magnet"===a?"Fridge Magnet":a.charAt(0).toUpperCase()+a.slice(1)}`,size:o,shape:p,quantity:d,unitPrice:s,totalPrice:l,imageUrl:i.s3Url,imageData:r,instructions:f.trim(),addedAt:(new Date).toISOString()};ce(c),T.info("Item added to cart successfully",c),G(!1),V(!0),setTimeout(()=>V(!1),3e3)}catch(t){T.error("Failed to add item to cart",{error:t.message},t),G(!1),alert(`Failed to add to cart: ${t.message}`)}}else T.warn("Attempted to add to cart without image")},[z,a,o,p,d,f,ce,S]),ue=m(a,o,d);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsxs("title",{children:["Design Your Custom ",a===l.STICKERS?"Stickers":"Magnets"," | Sticker & Magnet Lab"]}),e.jsx("meta",{name:"description",content:"Create your own custom stickers and magnets with our easy-to-use designer. Upload your image and see your design come to life."})]}),e.jsxs("div",{className:"bg-gray-50 min-h-[calc(100vh-140px)]",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"container-custom py-4",children:[e.jsxs("h1",{className:"text-2xl font-bold text-graphite",children:["Custom ",e.jsx("span",{className:"gradient-text",children:"Design Studio"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your design and create custom stickers or magnets"})]})}),e.jsx("div",{className:"container-custom py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs(t.aside,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"w-full lg:w-[30%] lg:min-w-[320px] space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-soft",children:e.jsx(J,{activeType:a,onChange:ne})}),e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-soft",children:e.jsx(ee,{productType:a,selectedSize:o,onSizeChange:ae,selectedQuantity:d,onQuantityChange:u,disabled:M})}),e.jsx(te,{productType:a,size:o,quantity:d}),e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-soft",children:e.jsx(re,{value:f,onChange:g})}),e.jsxs("div",{className:"hidden lg:block sticky bottom-6",children:[e.jsx(t.button,{onClick:de,disabled:!z||$,whileHover:{scale:z?1.02:1},whileTap:{scale:z?.98:1},className:`\n                    w-full py-4 px-6 rounded-xl font-bold text-lg\n                    flex items-center justify-center gap-3\n                    transition-all duration-300 shadow-lg\n                    ${z?"bg-gradient-to-r from-cool-blue to-deep-indigo text-white hover:shadow-glow":"bg-gray-300 text-gray-500 cursor-not-allowed"}\n                    disabled:opacity-50\n                  `,children:e.jsx(r,{mode:"wait",children:$?e.jsxs(t.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adding..."]},"loading"):W?e.jsxs(t.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex items-center gap-2",children:[e.jsx(s,{className:"w-5 h-5"}),"Added to Cart!"]},"success"):e.jsxs(t.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5"}),"Add to Cart - $",null==ue?void 0:ue.toFixed(2)]},"default")})}),!z&&e.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:"Upload an image to continue"})]})]}),e.jsxs(t.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex-1 lg:w-[50%] space-y-4",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-soft overflow-hidden",children:z?e.jsx(X,{ref:S,productSize:Y,imageDataUrl:E,rotation:w,showGrid:v,shape:p,className:"min-h-[450px]"}):e.jsx("div",{className:"min-h-[450px] flex items-center justify-center p-8",children:e.jsx(K,{onFileSelect:ie,isLoading:M,progress:I,error:B,hasImage:z,className:"w-full max-w-md"})})}),z&&e.jsx(Z,{shape:p,onShapeChange:x,rotation:w,onRotationChange:b,showGrid:v,onGridToggle:()=>F(!v),onReset:se,onFitToCanvas:oe,onDownload:le,disabled:!z}),e.jsx("div",{className:"lg:hidden",children:e.jsxs(t.button,{onClick:de,disabled:!z||$,className:`\n                    w-full py-4 px-6 rounded-xl font-bold text-lg\n                    flex items-center justify-center gap-3\n                    ${z?"bg-gradient-to-r from-cool-blue to-deep-indigo text-white":"bg-gray-300 text-gray-500"}\n                  `,children:[e.jsx(C,{className:"w-5 h-5"}),"Add to Cart - $",null==ue?void 0:ue.toFixed(2)]})})]}),e.jsxs(t.aside,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"w-full lg:w-[20%] lg:min-w-[260px] space-y-6",children:[z&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(L,{className:"w-5 h-5 text-cool-blue"}),e.jsx("h3",{className:"font-semibold text-graphite",children:"Your Image"})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:E,alt:"Uploaded design",className:"w-full aspect-square object-contain bg-gray-100 rounded-lg"}),e.jsx("button",{onClick:q,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remove image",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),P&&e.jsxs("div",{className:`\n                      p-3 rounded-lg text-sm\n                      ${"excellent"===P.level?"bg-green-100 text-green-700":"good"===P.level?"bg-blue-100 text-blue-700":"acceptable"===P.level?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}\n                    `,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:["excellent"===P.level||"good"===P.level?e.jsx(s,{className:"w-4 h-4"}):e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold capitalize",children:[P.level," Quality"]})]}),e.jsx("p",{className:"text-xs",children:P.message}),e.jsxs("p",{className:"text-xs mt-1",children:["Resolution: ~",P.dpi," DPI"]}),P.wasCompressed&&e.jsxs("p",{className:"text-xs mt-1",children:["Compressed: ",P.originalSize," → ",P.processedSize]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(K,{onFileSelect:ie,isLoading:M,progress:I,error:B,hasImage:!1,className:"[&>div]:min-h-[100px] [&>div]:p-4"})})]}),!z&&e.jsxs("div",{className:"hidden lg:block bg-white rounded-2xl p-5 shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(U,{className:"w-5 h-5 text-cool-blue"}),e.jsx("h3",{className:"font-semibold text-graphite",children:"Upload Your Design"})]}),e.jsx(K,{onFileSelect:ie,isLoading:M,progress:I,error:B,hasImage:!1})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(y,{className:"w-5 h-5 text-cool-blue"}),e.jsx("h3",{className:"font-semibold text-graphite",children:"Accepted Formats"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-lg text-sm font-medium text-gray-600",children:".JPG"}),e.jsx("span",{className:"px-3 py-1 bg-gray-100 rounded-lg text-sm font-medium text-gray-600",children:".PNG"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"High quality images recommended for best print results"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-soft-sky/50 to-white rounded-2xl p-5 shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(H,{className:"w-5 h-5 text-cool-blue"}),e.jsx("h3",{className:"font-semibold text-graphite",children:"Design Tips"})]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-gray-600",children:["Use high resolution images ",e.jsx("span",{className:"font-medium text-graphite",children:"(300 DPI)"})]})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-gray-600",children:[e.jsx("span",{className:"font-medium text-graphite",children:"PNG"})," works best for transparent backgrounds"]})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-gray-600",children:["Upload files up to ",e.jsx("span",{className:"font-medium text-graphite",children:"50MB"})," for processing"]})]}),e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(s,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-gray-600",children:["Keep important elements within the ",e.jsx("span",{className:"font-medium text-graphite",children:"safe zone"})," (dashed line)"]})]})]})]}),z&&e.jsxs("button",{onClick:le,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-white border-2 border-gray-200 rounded-xl text-graphite font-medium hover:border-cool-blue hover:text-cool-blue transition-all duration-200",children:[e.jsx(D,{className:"w-5 h-5"}),"Download Preview"]})]})]})})]})]})}export{it as default};
